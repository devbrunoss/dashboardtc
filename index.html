<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Open Graph atualizado -->
     <title>TrackCripto - Dashboard Profissional para Criptomoedas</title>
  <meta property="og:title" content="TrackCripto - Dashboard Profissional para Criptomoedas">
  <meta property="og:description"
    content="Acompanhe os preços, tendências e índices das principais criptomoedas em tempo real. Descubra métricas exclusivas e monitore seu portfólio com facilidade!">
  <meta property="og:image" content="https://trackcriptodb.netlify.app/assets/foto1.png">
  <meta property="og:url" content="https://trackcripto.netlify.app">
  <meta property="og:type" content="website">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:image:alt" content="TrackCripto - Sua ferramenta de leitura de mercado">
  <meta property="og:image:type" content="image/png">

  <!-- Forçar atualização de cache -->
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:image:alt" content="TrackCripto - Dashboard de Criptomoedas">
  <meta property="og:image:type" content="image/png">

  <!-- Evitar cache indesejado -->
  <meta http-equiv="cache-control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="pragma" content="no-cache">
  <meta http-equiv="expires" content="0">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="TrackCripto • Ferramentas Cripto">
  <meta name="twitter:description"
    content="Veja sinais de compra ou venda com base no medo e euforia do mercado cripto.">
  <meta name="twitter:image" content="https://trackcripto.netlify.app/assets/share-trackcripto.png">
  <meta name="twitter:image:alt" content="TrackCripto - Ferramentas visuais para cripto">
  <meta http-equiv="Content-Security-Policy" content="frame-src https://www.binance.com">
  <script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebApplication",
  "name": "TrackCripto",
  "description": "Ferramentas gratuitas para análise de criptomoedas",
  "url": "https://trackcripto.netlify.app",
  "applicationCategory": "FinanceApplication"
}
</script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-chart-financial@1.1.0"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'G-HE4QCD8ERG');
  </script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css" rel="stylesheet">

<!-- Favicon -->
  <link rel="icon"
    href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22 fill=%2239ff14%22>T</text></svg>">
</head>

  <style>
    :root {
      --primary: #00ff88;
      --primary-dark: #00cc6a;
      --bg: #0a0a0a;
      --card: #1a1a1a;
      --text: #ffffff;
      --text-muted: #aaaaaa;
      --error: #ff4d4d;
    }

    :root[data-theme="light"] {
      --bg: #f5f5f5;
      --card: #ffffff;
      --text: #333333;
      --text-muted: #666666;
      --primary: #00a55a;
      --primary-dark: #008548;
    }

    /* Estilo para o ícone do botão */
    #themeToggle i {
      transition: transform 0.3s;
    }

    [data-theme="light"] #themeToggle i {
      transform: rotate(180deg);
    }

    /* Garante que os inputs fiquem legíveis no light mode */
    [data-theme="light"] .form-input {
      background: rgba(0, 0, 0, 0.05);
      color: #333;
      border-color: var(--primary);
    }

    /* Ajusta as cores do chat no light mode */
    [data-theme="light"] #aiChatContainer {
      background: #f0f2f5;
      border-color: var(--primary);
    }

    [data-theme="light"] #chatContent div[style*="background:rgba(0,255,136"] {
      background: rgba(0, 165, 90, 0.1) !important;
      color: #333 !important;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Arial, sans-serif;
    }

    body {
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      padding: 20px;
    }

    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 0;
      border-bottom: 1px solid rgba(0, 255, 136, 0.1);
      margin-bottom: 30px;
    }

    .logo {
      font-size: 1.8rem;
      font-weight: 700;
      color: var(--primary);
      display: flex;
      align-items: center;
      gap: 0px;
    }

    .logo-track {
      color: var(--text);
    }

    .logo-crypto {
      color: var(--primary);
    }

    /* Ajustes para modo claro */
    [data-theme="light"] .logo-track {
      color: var(--text);
      /* Preto (#333) no modo claro */
    }

    [data-theme="light"] .logo-crypto {
      color: var(--primary-dark);
      /* Verde mais suave (#00A55A) */
    }

    .card {
      background: var(--card);
      transition: transform 0.3s, box-shadow 0.3s;
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 20px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      border: 1px solid rgba(0, 255, 136, 0.1);
    }

    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 20px rgba(0, 255, 136, 0.2);
    }

    .price {
      font-size: 2.5rem;
      font-weight: 700;
      color: var(--primary);
      margin: 10px 0;
    }

    .chart-container {
      position: relative;
      height: 300px;
      width: 100%;
      background: rgba(0, 0, 0, 0.2);
      border-radius: 12px;
      padding: 20px;
      margin-top: 15px;
    }

    .chart-container {
      height: 200px !important;
      /* Altura reduzida */
      background: rgba(0, 0, 0, 0.1);
      padding: 10px !important;
      /* Padding menor */
    }

    /* Ajusta o card pai */
    .card {
      padding: 15px;
      margin: 10px 0;
    }

    /* Título compacto */
    .card h2 {
      font-size: 1.1rem;
      margin-bottom: 10px;
    }

    .metrics-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin: 20px 0;
    }

    .metric-card {
      background: rgba(0, 255, 136, 0.05);
      border-radius: 8px;
      padding: 15px;
      border-left: 3px solid var(--primary);
    }

    /* Estilos para a seção educativa */
    .tab-buttons {
      display: flex;
      gap: 10px;
      margin: 20px 0;
    }

    .tab-btn {
      background: rgba(0, 255, 136, 0.1);
      border: none;
      padding: 10px 20px;
      border-radius: 8px;
      color: var(--primary);
      transition: all 0.3s;
    }

    .tab-btn.active {
      background: var(--primary);
      color: #000;
    }

    .tab-content {
      display: none;
    }

    .glossario-grid,
    .tutoriais-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }

    .termo-card,
    .tutorial-card {
      background: rgba(0, 255, 136, 0.05);
      border-radius: 10px;
      padding: 20px;
      border: 1px solid rgba(0, 255, 136, 0.2);
      transition: transform 0.3s;
    }

    .termo-card:hover,
    .tutorial-card:hover {
      transform: translateY(-5px);
      border-color: var(--primary);
    }

    .termo-card h3 {
      color: var(--primary);
      margin-bottom: 10px;
    }

    .termo-card p {
      color: var(--text-muted);
      font-size: 0.9rem;
    }

    .search-box {
      position: relative;
      margin-bottom: 20px;
    }

    .search-box i {
      position: absolute;
      right: 15px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--primary);
    }

    .tutorial-card {
      cursor: pointer;
      position: relative;
      overflow: hidden;
    }

    .tutorial-card h3 {
      margin-bottom: 10px;
      color: var(--primary);
    }

    .tutorial-card .dificuldade {
      position: absolute;
      top: 15px;
      right: 15px;
      background: rgba(0, 255, 136, 0.2);
      padding: 3px 8px;
      border-radius: 20px;
      font-size: 0.8rem;
    }

    .tutorial-card .tempo {
      font-size: 0.8rem;
      color: var(--text-muted);
      margin-top: 10px;
    }

    .tutorial-card .tempo i {
      margin-right: 5px;
    }

    .form-input {
      width: 100%;
      padding: 10px;
      margin: 8px 0;
      border: 1px solid #00ff88;
      border-radius: 8px;
      background: rgba(0, 0, 0, 0.3);
      color: white;
    }

    .btn {
      background: var(--primary);
      color: #000;
      border: none;
      padding: 12px 20px;
      border-radius: 8px;
      font-weight: bold;
      cursor: pointer;
      transition: transform 0.3s;
    }

    .btn:hover {
      transform: scale(1.03);
    }

    @media (max-width: 768px) {
      .metrics-grid {
        grid-template-columns: 1fr 1fr;
      }

      .price {
        font-size: 2rem;
      }
    }

    /* Fear & Greed Meter */
    #fear-greed {
      background: linear-gradient(90deg, #ff0000 0%, #ffcc00 50%, #00ff88 100%);
      height: 20px;
      border-radius: 10px;
      margin: 15px 0;
      position: relative;
    }

    #fear-greed-indicator {
      position: absolute;
      top: -5px;
      width: 20px;
      height: 30px;
      background: white;
      border-radius: 5px;
      transform: translateX(-10px);
      transition: left 0.5s ease;
    }

    /* Risk Calculator */
    #risk-result {
      background: rgba(0, 255, 136, 0.1);
      padding: 15px;
      border-radius: 10px;
      border-left: 3px solid #00ff88;
      display: none;
      animation: fadeIn 0.5s;
      margin-top: 15px;
      transition: all 0.3s ease;
    }

    #risk-value {
      line-height: 1.6;
      margin-bottom: 10px;
    }

    #risk-calculator {
      position: relative;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
      }

      to {
        opacity: 1;
      }
    }

    /* Navigation */
    nav {
      display: flex;
      gap: 15px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }

    nav a {
      color: var(--primary);
      text-decoration: none;
      padding: 8px 15px;
      border-radius: 8px;
      background: rgba(0, 255, 136, 0.1);
      transition: all 0.3s;
    }

    nav a:hover {
      background: rgba(0, 255, 136, 0.2);
    }

    /* Chat IA Styles */
    #aiChatContainer {
      position: fixed;
      bottom: 90px;
      right: 30px;
      width: 350px;
      max-height: 400px;
      background: #1a1a2e;
      border-radius: 15px;
      box-shadow: 0 0 20px rgba(0, 255, 136, 0.5);
      display: none;
      z-index: 1000;
      overflow: hidden;
      border: 1px solid rgba(0, 255, 136, 0.3);
    }

    #chatToggle {
      position: fixed;
      bottom: 30px;
      right: 30px;
      width: 60px;
      height: 60px;
      background: #00ff88;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      box-shadow: 0 0 15px rgba(0, 255, 136, 0.7);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1001;
      transition: all 0.3s;
    }

    /* Estilos atualizados para Índices de Mercado */
    .market-indices-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 20px;
    }

    @media (min-width: 768px) {
      .market-indices-grid {
        grid-template-columns: 1fr 1fr;
      }

      body {
        padding: 10px;
      }

      table {
        font-size: 12px;
        display: block;
        overflow-x: auto;
      }

    }


    .index-card {
      position: relative;
      min-height: 200px;
    }

    .simplified-chart {
      height: 120px;
      background: #f5f5f5;
      border-radius: 8px;
      margin: 10px 0;
      position: relative;
      overflow: hidden;
    }

    .chart-bar {
      height: 100%;
      background: linear-gradient(90deg, #00FF88, #7cf059);
      width: 0;
      transition: width 1s ease;
    }

    .season-status {
      margin-top: 15px;
      text-align: center;
    }

    .status-indicator {
      width: 100%;
      height: 10px;
      background: #e0e0e0;
      border-radius: 5px;
      margin-bottom: 8px;
      position: relative;
    }

    .status-indicator::after {
      content: '';
      position: absolute;
      left: 75%;
      top: 0;
      bottom: 0;
      width: 2px;
      background: #333;
    }

    .status-text {
      font-size: 0.9rem;
      color: var(--text);
    }

    .chart-error {
      color: #e74c3c;
      text-align: center;
      padding: 5px;
      font-size: 0.8rem;
    }

    .update-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding-top: 10px;
      border-top: 1px solid var(--text-muted);
    }

    .refresh-btn {
      background: none;
      border: none;
      color: var(--primary);
      cursor: pointer;
      font-size: 0.8rem;
    }

    /* Estilos para o portfólio */
    .portfolio-chart canvas {
      width: 100% !important;
      height: 300px !important;
    }

    .portfolio-table {
      margin-top: 20px;
      overflow-x: auto;
    }

    .portfolio-table table {
      width: 100%;
      border-collapse: collapse;
    }

    .portfolio-table th,
    .portfolio-table td {
      padding: 12px;
      text-align: left;
      border-bottom: 1px solid rgba(0, 255, 136, 0.1);
    }

    .portfolio-table th {
      color: var(--primary);
    }

    .portfolio-confirmation {
      position: fixed;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%);
      background: var(--primary);
      color: #000;
      padding: 10px 20px;
      border-radius: 50px;
      z-index: 1000;
      animation: slideUp 0.5s ease;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    }

    @keyframes slideUp {
      from {
        opacity: 0;
        transform: translateX(-50%) translateY(100%);
      }

      to {
        opacity: 1;
        transform: translateX(-50%) translateY(0);
      }
    }

    /* Microinterações */
    .updating {
      animation: pulseUpdate 0.5s ease;
    }

    @keyframes pulseUpdate {
      0% {
        box-shadow: 0 0 0 0 rgba(0, 255, 136, 0.4);
      }

      70% {
        box-shadow: 0 0 0 10px rgba(0, 255, 136, 0);
      }

      100% {
        box-shadow: 0 0 0 0 rgba(0, 255, 136, 0);
      }
    }

    .fade-in {
      animation: fadeIn 0.5s ease forwards;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* ============ NOVOS ESTILOS ADICIONADOS ============ */

    /* Alertas de Preço */
    #alertsContainer {
      max-height: 300px;
      overflow-y: auto;
    }

    .alert-item {
      background: rgba(0, 255, 136, 0.05);
      border-left: 3px solid var(--primary);
      padding: 10px;
      margin-bottom: 10px;
      border-radius: 5px;
      display: flex;
      justify-content: space-between;
    }

    /* Calculadora de Trade */
    #calcResult {
      display: none;
      margin-top: 15px;
      padding: 10px;
      background: rgba(0, 255, 136, 0.1);
      border-radius: 8px;
    }

    /* Mobile First Adjustments */
    @media (max-width: 768px) {
      body {
        padding: 10px;
      }

      .card {
        padding: 15px;
      }

      .metrics-grid {
        grid-template-columns: 1fr;
      }

      /* Ajuste do gráfico */
      .chart-container {
        height: 200px;
        padding: 10px;
      }

      /* Menu compacto */
      nav {
        flex-direction: column;
        gap: 8px;
      }

      nav a {
        width: 100%;
        text-align: center;
        padding: 10px;
      }

      /* Chat IA menor */
      #aiChatContainer {
        width: 90%;
        right: 5%;
        bottom: 80px;
      }
    }

    @media (max-width: 480px) {
      .price {
        font-size: 1.8rem;
      }

      /* Formulários mais compactos */
      .form-input {
        padding: 8px;
      }

      /* Esconde alguns elementos secundários */
      .dificuldade,
      .tempo {
        display: none;
      }
    }

    /* ANIMAÇÃO DE ENTRADA (Fade-in) */
    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Aplica a animação nos elementos principais */
    header,
    section,
    footer {
      animation: fadeIn 0.6s ease-out forwards;
    }

    /* Delay para sections (efeito cascata) */
    section:nth-child(1) {
      animation-delay: 0.2s;
    }

    section:nth-child(2) {
      animation-delay: 0.4s;
    }

    /* ANIMAÇÃO AO ROLAR (Scroll-triggered) */
    @keyframes slideUp {
      from {
        opacity: 0;
        transform: translateY(50px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .slide-up {
      opacity: 0;
      /* Inicia invisível */
    }

    .slide-up.animated {
      animation: slideUp 0.3s ease-out forwards;
    }

    .back-to-top {
      position: fixed;
      bottom: 80%;
      right: 25px;
      width: 50px;
      height: 50px;
      background: var(--primary);
      color: var(--bg);
      border: none;
      border-radius: 50%;
      cursor: pointer;
      opacity: 0;
      transition: opacity 0.3s, transform 0.3s;
      z-index: 1000;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .back-to-top.visible {
      opacity: 1;
    }

    .back-to-top:hover {
      transform: translateY(-5px);
      background: var(--primary-dark);
    }

    @media (max-width: 768px) {
      .sidebar {
        width: 100%;
        margin-top: 30px;
        border-left: none;
        border-top: 1px solid #00FF88;
      }
    }

    /* Layout responsivo dos controles */
    .header-tools {
      display: flex;
      flex-direction: column;
      gap: 10px;
      align-items: flex-start;
      margin-top: 10px;
    }

    /* Botão de tema claro/escuro */
    .theme-btn {
      background-color: var(--primary);
      color: #000;
      border: none;
      padding: 10px 20px;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.3s;
    }


    .theme-btn i {
      margin-right: 6px;
    }

    .theme-btn:hover {
      background-color: #00cc6d;
    }

    /* Caixa de modo iniciante/avançado */
    .mode-box {
      background-color: var(--primary);
      color: #000;
      padding: 10px 15px;
      border-radius: 8px;
      display: flex;
      align-items: center;
      gap: 10px;
      font-weight: 600;
    }

    .platforms-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
    }

    .platform-card {
      background: var(--card-bg);
      border-radius: 10px;
      padding: 15px;
      text-decoration: none;
      transition: all 0.3s;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .platform-card:hover {
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }

    /* Cores específicas por plataforma */
    .platform-card.binance {
      border-top: 3px solid #f0b90b;
    }

    .platform-card.bybit {
      border-top: 3px solid #2b71ff;
    }

    .platform-header {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 12px;
    }

    .platform-name {
      font-weight: bold;
      color: var(--text);
      font-size: 1rem;
    }

    .platform-badge {
      background: var(--primary);
      color: #000;
      font-size: 0.7rem;
      padding: 2px 8px;
      border-radius: 10px;
      font-weight: bold;
      margin-left: auto;
    }

    .platform-detail {
      font-size: 0.85rem;
      color: var(--text-muted);
      margin: 8px 0;
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .platform-cta {
      color: var(--primary);
      font-weight: bold;
      font-size: 0.9rem;
      display: flex;
      align-items: center;
      gap: 5px;
      margin-top: 10px;
    }

    /* Container para os controles do header */
.header-right {
  display: flex;
  align-items: center;
  gap: 15px;
}

/* Container do toggle de modo */
.mode-toggle-container {
  display: flex;
  align-items: center;
  gap: 10px;
  background: rgba(0, 255, 136, 0.1);
  padding: 8px 15px;
  border-radius: 8px;
  border: 1px solid rgba(0, 255, 136, 0.2);
}

.mode-text {
  font-weight: 600;
  font-size: 14px;
  color: var(--text);
}

/* Switch personalizado */
.switch {
  position: relative;
  display: inline-block;
  width: 50px;
  height: 24px;
}

.switch input {
  opacity: 0;
  width: 0;
  height: 0;
}

.switch .slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: #ccc;
  transition: .4s;
  border-radius: 24px;
}

.switch .slider:before {
  position: absolute;
  content: "";
  height: 18px;
  width: 18px;
  left: 3px;
  bottom: 3px;
  background-color: white;
  transition: .4s;
  border-radius: 50%;
}

.switch input:checked + .slider {
  background-color: var(--primary);
}

.switch input:checked + .slider:before {
  transform: translateX(26px);
}

/* Botão de tema */
.theme-btn {
  background: rgba(0, 255, 136, 0.1);
  color: var(--text);
  border: 1px solid var(--primary);
  padding: 8px 15px;
  border-radius: 8px;
  font-weight: 600;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 6px;
  transition: all 0.3s;
}

.theme-btn:hover {
  background: rgba(0, 255, 136, 0.2);
}

/* Responsividade */
@media (max-width: 768px) {
  .header-right {
    gap: 10px;
  }
  
  .mode-toggle-container {
    padding: 6px 12px;
  }
  
  .mode-text {
    font-size: 12px;
  }
  
  .switch {
    width: 45px;
    height: 22px;
  }
  
  .switch .slider:before {
    height: 16px;
    width: 16px;
  }
}

@media (max-width: 480px) {
  .header-right {
    flex-direction: column;
    gap: 8px;
    align-items: flex-end;
  }
  
  .mode-text {
    display: none;
  }
  
  .mode-toggle-container {
    padding: 5px 10px;
  }
}

/* Quiz Modal */
.quiz-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.9);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 9999;
  backdrop-filter: blur(10px);
}

.quiz-container {
  background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
  border-radius: 20px;
  padding: 30px;
  width: 90%;
  max-width: 500px;
  border: 2px solid #00ff88;
  box-shadow: 0 0 50px rgba(0, 255, 136, 0.3);
  animation: modalSlideIn 0.6s ease-out;
}

@keyframes modalSlideIn {
  from {
    opacity: 0;
    transform: translateY(-50px) scale(0.9);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.quiz-header {
  text-align: center;
  margin-bottom: 30px;
}

.quiz-header h2 {
  color: #00ff88;
  font-size: 28px;
  margin-bottom: 10px;
}

.quiz-header p {
  color: #ccc;
  margin-bottom: 20px;
}

.progress-bar {
  width: 100%;
  height: 6px;
  background: #333;
  border-radius: 3px;
  overflow: hidden;
}

.progress-fill {
  height: 100%;
  background: linear-gradient(90deg, #00ff88, #39ff14);
  width: 33%;
  transition: width 0.5s ease;
  border-radius: 3px;
}

/* Questions */
.question {
  display: none;
  animation: questionFadeIn 0.5s ease;
}

.question.active {
  display: block;
}

@keyframes questionFadeIn {
  from {
    opacity: 0;
    transform: translateX(30px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

.question h3 {
  color: #fff;
  font-size: 20px;
  text-align: center;
  margin-bottom: 30px;
  font-weight: 600;
}

.options {
  display: flex;
  flex-direction: column;
  gap: 15px;
}

.option-btn {
  background: rgba(255, 255, 255, 0.1);
  border: 2px solid transparent;
  padding: 20px;
  border-radius: 15px;
  color: #fff;
  font-size: 16px;
  cursor: pointer;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  gap: 15px;
  text-align: left;
}

.option-btn:hover {
  background: rgba(0, 255, 136, 0.2);
  border-color: #00ff88;
  transform: translateY(-2px);
}

.option-btn:active {
  transform: translateY(0);
}

.emoji {
  font-size: 24px;
  flex-shrink: 0;
}

/* Quiz Footer */
.quiz-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-top: 30px;
  padding-top: 20px;
  border-top: 1px solid #333;
}

.nav-btn {
  background: rgba(0, 255, 136, 0.2);
  border: 2px solid #00ff88;
  color: #00ff88;
  padding: 12px 20px;
  border-radius: 25px;
  cursor: pointer;
  transition: all 0.3s ease;
  font-weight: 600;
}

.nav-btn:hover:not(:disabled) {
  background: #00ff88;
  color: #000;
  transform: translateY(-2px);
}

.nav-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.question-counter {
  color: #00ff88;
  font-weight: 600;
}

/* Result Screen */
.quiz-result {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.95);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 9999;
  backdrop-filter: blur(15px);
}

.result-container {
  background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
  border-radius: 25px;
  padding: 40px;
  text-align: center;
  border: 3px solid #00ff88;
  box-shadow: 0 0 60px rgba(0, 255, 136, 0.4);
  animation: resultScaleIn 0.8s ease-out;
}

@keyframes resultScaleIn {
  from {
    opacity: 0;
    transform: scale(0.8) rotate(-5deg);
  }
  to {
    opacity: 1;
    transform: scale(1) rotate(0);
  }
}

.result-icon {
  font-size: 80px;
  margin-bottom: 20px;
  animation: bounce 2s infinite;
}

@keyframes bounce {
  0%, 20%, 50%, 80%, 100% {
    transform: translateY(0);
  }
  40% {
    transform: translateY(-20px);
  }
  60% {
    transform: translateY(-10px);
  }
}

.result-desc {
  color: #ccc;
  font-size: 18px;
  line-height: 1.6;
  margin-bottom: 25px;
}

.profile-name {
  display: inline-block;
  background: linear-gradient(90deg, #00ff88, #39ff14);
  color: #000;
  padding: 10px 25px;
  border-radius: 25px;
  font-weight: 800;
  font-size: 18px;
  margin: 15px 0;
  animation: glow 2s infinite;
}

@keyframes glow {
  0%, 100% {
    box-shadow: 0 0 20px rgba(0, 255, 136, 0.5);
  }
  50% {
    box-shadow: 0 0 30px rgba(0, 255, 136, 0.8);
  }
}

.cta-btn {
  background: linear-gradient(90deg, #00ff88, #39ff14);
  color: #000;
  border: none;
  padding: 18px 35px;
  border-radius: 30px;
  font-size: 18px;
  font-weight: 700;
  cursor: pointer;
  margin: 20px 0;
  transition: all 0.3s ease;
  box-shadow: 0 5px 25px rgba(0, 255, 136, 0.3);
}

.cta-btn:hover {
  transform: translateY(-3px) scale(1.05);
  box-shadow: 0 8px 30px rgba(0, 255, 136, 0.5);
}

.text-btn {
  background: none;
  border: none;
  color: #00ff88;
  cursor: pointer;
  font-size: 14px;
  opacity: 0.8;
  transition: opacity 0.3s ease;
}

.text-btn:hover {
  opacity: 1;
}

/* Responsive */
@media (max-width: 768px) {
  .quiz-container {
    width: 95%;
    padding: 20px;
  }
  
  .option-btn {
    padding: 15px;
    font-size: 14px;
  }
  
  .result-icon {
    font-size: 60px;
  }
}

/* Adicione estas animações extras */
@keyframes pulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.05); }
  100% { transform: scale(1); }
}

@keyframes shake {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-5px); }
  75% { transform: translateX(5px); }
}

.option-btn.correct {
  animation: pulse 0.5s ease;
  background: rgba(0, 255, 136, 0.3) !important;
  border-color: #00ff88 !important;
}

.option-btn.incorrect {
  animation: shake 0.5s ease;
  background: rgba(255, 77, 77, 0.3) !important;
  border-color: #ff4d4d !important;
}

/* Efeito de confetti virtual */
.confetti {
  position: absolute;
  width: 10px;
  height: 10px;
  background: #00ff88;
  opacity: 0.8;
  animation: confettiFall 2s ease-in-out;
}

@keyframes confettiFall {
  0% {
    transform: translateY(-100px) rotate(0deg);
    opacity: 1;
  }
  100% {
    transform: translateY(100vh) rotate(360deg);
    opacity: 0;
  }
}
  </style>
</head>

<button id="backToTop" class="back-to-top" aria-label="Voltar ao topo">
  <i class="fas fa-arrow-up"></i>
</button>

<body>
  <header class="app-header">
  <div class="logo">
    <span class="logo-track">Track</span>
    <span class="logo-crypto">Cripto</span>
  </div>

  <div class="header-right">
    <!-- Botão de Modo Iniciante/Avançado -->
    <div class="mode-toggle-container">
      <span class="mode-text" id="modeText">Iniciante</span>
      <label class="switch">
        <input type="checkbox" id="advancedModeToggle">
        <span class="slider"></span>
      </label>
    </div>

    <!-- Botão de Tema -->
    <button id="themeToggle" class="theme-btn" aria-label="Alternar tema">
      <i class="fas fa-moon"></i>
    </button>
  </div>
</header>
    
  </header>

  <script>
    // Toggle Tema Claro/Escuro
  
    // Toggle Modo Iniciante/Avançado
    const modeToggle = document.getElementById('trader-mode-toggle');
    const modeText = document.getElementById('mode-text');

    modeToggle.addEventListener('change', () => {
      const isAdvanced = modeToggle.checked;
      modeText.textContent = isAdvanced ? 'Avançado' : 'Iniciante';
      document.body.classList.toggle('trader-mode', isAdvanced);
    });

  </script>

  <style>
    /* Cabeçalho */
    /* Menu Hambúrguer */
    .menu-toggle {
      display: none;
      flex-direction: column;
      justify-content: space-between;
      width: 28px;
      height: 20px;
      background: none;
      border: none;
      cursor: pointer;
    }

    .menu-bar {
      width: 100%;
      height: 3px;
      background: var(--text);
      border-radius: 2px;
      transition: all 0.3s ease;
    }

    /* Animação ao abrir */
    .menu-toggle.active .menu-bar:nth-child(1) {
      transform: rotate(45deg) translate(5px, 5px);
    }

    .menu-toggle.active .menu-bar:nth-child(2) {
      opacity: 0;
    }

    .menu-toggle.active .menu-bar:nth-child(3) {
      transform: rotate(-45deg) translate(6px, -6px);
    }

    /* Mostrar só em telas pequenas */
    @media (max-width: 768px) {
      .menu-toggle {
        display: flex;
      }

      .main-nav {
        position: fixed;
        top: 0;
        left: -100%;
        width: 70%;
        height: 100vh;
        background: var(--card);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        transition: left 0.3s ease;
        z-index: 999;
      }

      .main-nav.active {
        left: 0;
      }
    }

    a[href*="binance.com"] {
      text-decoration: none !important;
    }


    /* Layout do Header */
    .app-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 20px;
      background: var(--header-bg);
      border-bottom: 1px solid var(--border-color);
    }

    .logo {
      font-size: 1.5rem;
      font-weight: bold;
      color: var(--primary);
    }

    /* Container dos controles */
    .header-controls {
      display: flex;
      gap: 15px;
      align-items: center;
    }

    /* Botão de Tema */
    .theme-btn {
      background: rgba(0, 255, 136, 0.2);
      color: var(--text);
      border: 1px solid var(--primary);
      padding: 8px 15px;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 6px;
      transition: all 0.3s;
    }

    .theme-btn:hover {
      background: rgba(0, 255, 136, 0.3);
    }

    /* Caixa do Modo Iniciante/Avançado */
    .mode-box {
      background: rgba(0, 255, 136, 0.2);
      color: var(--text);
      border: 1px solid var(--primary);
      padding: 8px 15px;
      border-radius: 8px;
      display: flex;
      align-items: center;
      gap: 10px;
      font-weight: 600;
    }

    /* Switch Personalizado */
    .switch {
      position: relative;
      display: inline-block;
      width: 50px;
      height: 24px;
    }

    .switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: #ccc;
      transition: .4s;
      border-radius: 24px;
    }

    .slider:before {
      position: absolute;
      content: "";
      height: 18px;
      width: 18px;
      left: 3px;
      bottom: 3px;
      background: white;
      transition: .4s;
      border-radius: 50%;
    }

    .header-right {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    input:checked+.slider {
      background: var(--primary);
    }

    input:checked+.slider:before {
      transform: translateX(26px);
    }

    /* Responsividade */
    @media (max-width: 600px) {
      .header-controls {
        flex-direction: column;
        align-items: flex-end;
        gap: 10px;
      }
    }



    .switch {
      position: relative;
      display: inline-block;
      width: 60px;
      height: 24px;
    }

    .switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #ccc;
      transition: .4s;
      border-radius: 24px;
    }

    .slider:before {
      position: absolute;
      content: "";
      height: 16px;
      width: 16px;
      left: px;
      bottom: 4px;
      background-color: white;
      transition: .4s;
      border-radius: 50%;
    }

    input:checked+.slider {
      background-color: var(--primary);
    }

    input:checked+.slider:before {
      transform: translateX(36px);
    }

    .trader-mode .advanced-tool {
      display: block;
    }

    /* Exemplo: mostra ferramentas avançadas */
    .exchange-widget {
      background: rgba(0, 0, 0, 0.2);
      border-radius: 12px;
      overflow: hidden;
      margin-top: 10px;
      border: 1px solid rgba(0, 255, 136, 0.1);
    }

    /* Adicione ao seu arquivo CSS */
    .binance-redirect {
      text-align: center;
      margin-top: 15px;
    }

    .binance-btn {
      display: inline-block;
      background: linear-gradient(90deg, #f0b90b, #fcd535);
      color: #000;
      text-decoration: none;
      font-weight: bold;
      padding: 12px 25px;
      border-radius: 8px;
      transition: all 0.3s;
      box-shadow: 0 4px 12px rgba(240, 185, 11, 0.3);
    }

    .binance-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(240, 185, 11, 0.4);
    }

    .binance-btn-content {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .binance-btn img {
      border-radius: 50%;
    }

    .binance-stats {
      margin-top: 8px;
      font-size: 0.8rem;
      color: rgba(255, 255, 255, 0.7);
    }
  </style>


  </header>

  <main>


    <style>

      

      /* Reset para evitar bugs */
      .mobile-nav {
        box-sizing: border-box;
        width: 100%;
        padding: 0 10px;
        /* Evita vazamento lateral */
      }

      .nav-row {
        display: flex;
        justify-content: space-between;
        margin-bottom: 8px;
        gap: 5px;
        width: 100%;
        overflow: hidden;
        /* Previne overflow */
      }

      .nav-item {
        flex: 1;
        min-width: 0;
        /* Permite quebra de texto */
        padding: 12px 5px;
        background: rgba(0, 255, 136, 0.1);
        border-radius: 10px;
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        /* Centraliza texto */
        word-break: break-word;
        /* Quebra palavras longas */
      }

      /* Correção para itens bugados */
      .nav-item span {
        display: inline-block;
        max-width: 100%;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        /* (...) se muito longo */
      }

      /* Estado ativo */
      .nav-item.active {
        background: rgba(0, 255, 136, 0.2);
        border: 1px solid var(--primary);
      }

      /* ESTILO DO CARD */
      .binance-cta {
        text-align: center;
        padding: 10px;
      }

      /* BOTÃO PRINCIPAL */
      .binance-btn {
        display: flex;
        align-items: center;
        gap: 12px;
        background: linear-gradient(90deg, #f0b90b, #f8d33a);
        color: #000;
        text-decoration: none;
        font-weight: bold;
        padding: 12px 20px;
        border-radius: 10px;
        transition: all 0.3s;
        box-shadow: 0 4px 15px rgba(240, 185, 11, 0.3);
        border: none;
        cursor: pointer;
      }

      .binance-btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 6px 20px rgba(240, 185, 11, 0.4);
      }

      /* TEXTO DO BOTÃO */
      .btn-text {
        display: flex;
        flex-direction: column;
        text-align: left;
        flex-grow: 1;
      }

      .btn-title {
        font-size: 1rem;
        font-weight: 800;
      }

      .btn-subtitle {
        font-size: 0.75rem;
        font-weight: normal;
        opacity: 0.9;
      }

      /* CONTADOR DE USUÁRIOS */
      .user-count {
        font-size: 0.8rem;
        color: rgba(255, 255, 255, 0.7);
        margin-top: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 5px;
      }

      .user-count i {
        color: var(--primary);
      }

      /* Para mobile, mostra ícone em vez de texto */
@media (max-width: 480px) {
  .mode-toggle-container::before {
    content: '🎓';
    font-size: 16px;
  }
  
  .mode-text {
    display: none;
  }
  
  /* Tooltip para explicar o toggle */
  .mode-toggle-container:hover::after {
    content: 'Modo Iniciante/Avançado';
    position: absolute;
    bottom: -30px;
    right: 0;
    background: var(--card);
    padding: 5px 10px;
    border-radius: 5px;
    font-size: 12px;
    white-space: nowrap;
    z-index: 1000;
    border: 1px solid var(--primary);
  }
}
    </style>

    <!-- Crypto Price Card -->
    <div class="card beginner-mode" id="crypto-data">
      <div style="display: flex; justify-content: space-between; align-items: center;">
        <h2 id="cryptoName">Bitcoin (BTC)</h2>
        <div style="position:relative;">
          <select id="moedaSelect" class="form-input">
            <option value="bitcoin">BTC</option>
            <option value="ethereum">ETH</option>
            <option value="tether">USDT</option>
            <option value="bnb">BNB</option>
          </select>
        </div>
      </div>
      <div class="price" id="price">R$ --</div>
      <div id="variation">Variação 24h: --</div>
      <!-- LINK ADICIONADO (estilo discreto) -->
      <p style="margin-top: 10px; font-size: 0.9rem; color: var(--text-muted);">
        Negocie com taxa 0.1% na <a href="https://www.binance.com/activity/referral-entry/CPA?ref=CPA_0062C7L8QA"
          target="_blank" style="color: var(--primary); text-decoration: underline;">Binance</a>
      </p>
    </div>

    <!-- Advanced Metrics -->
    <div class="card beginner-mode">
      <h2><i class="fas fa-chart-bar"></i> Métricas Avançadas</h2>
      <div class="metrics-grid">
        <div class="metric-card">
          <p><i class="fas fa-trophy"></i> Ranking</p>
          <h3 id="rank">--</h3>
        </div>
        <div class="metric-card">
          <p><i class="fas fa-coins"></i> Capitalização</p>
          <h3 id="market-cap">R$ --</h3>
        </div>
        <div class="metric-card">
          <p><i class="fas fa-exchange-alt"></i> Volume 24h</p>
          <h3 id="volume">R$ --</h3>
        </div>
        <div class="metric-card">
          <p><i class="fas fa-boxes"></i> Fornecimento</p>
          <h3 id="supply">--</h3>
        </div>
      </div>
    </div>

    <!-- Chart -->
    <div class="card beginner-mode">
      <h2><i class="fas fa-chart-line"></i> Histórico de Preços (7 Dias)</h2>
      <div class="chart-container">
        <canvas id="graficoBTC"></canvas>
      </div>
    </div>

    <!-- Índices de Mercado -->
    <div class="card advanced-mode" id="market-indices">
      <h2><i class="fas fa-globe"></i> Índices de Mercado</h2>

      <div class="market-indices-grid">
        <!-- Dominância BTC -->
        <div class="index-card">
          <div class="index-header">
            <h3><i class="fab fa-bitcoin"></i> Dominância BTC</h3>
            <div class="current-value" id="btcDominanceValue">--%</div>
          </div>

          <div class="simplified-chart" id="btcDominanceChart">
            <div class="chart-bar" id="btcDominanceBar"></div>
          </div>

          <div class="chart-error" id="btcChartError" style="display: none;">
            <i class="fas fa-exclamation-triangle"></i> Erro ao carregar
          </div>
        </div>

        <!-- Altcoin Season -->
        <div class="index-card">
          <div class="index-header">
            <h3><i class="fas fa-calendar-alt"></i> Altcoin Season</h3>
            <div class="current-value" id="totalMarketCap">--.--B</div>
          </div>

          <div class="season-status">
            <div class="status-indicator" id="seasonIndicator"></div>
            <div class="status-text" id="seasonStatusText">Verificando...</div>
          </div>
        </div>
      </div>

      <div class="update-footer">
        <small>Última atualização: <span id="lastUpdateTime">--:--:--</span></small>
        <button id="refreshIndicesBtn" class="refresh-btn">
          <i class="fas fa-sync-alt"></i> Atualizar
        </button>
      </div>
    </div>

    <div class="card beginner-mode" style="margin-top: 20px; border: 1px solid rgba(240, 185, 11, 0.3);">
      <h2 style="margin-bottom: 15px;"><i class="fas fa-exchange-alt"></i> Comprar/Vender na Binance</h2>

      <div class="binance-cta">
        <a href="https://www.binance.com/en/trade/BTC_USDT?affiliateKey=CPA_0062C7L8QA" target="_blank"
          class="binance-btn">
          <img src="assets/logo-binance.png" alt="Binance" width="30" loading="lazy">
          <div class="btn-text">
            <span class="btn-title">Negociar na Binance</span>
            <span class="btn-subtitle">Taxas reduzidas para usuários TrackCripto</span>
          </div>
          <i class="fas fa-arrow-right"></i>
        </a>
        <p class="user-count"><i class="fas fa-users"></i> 120+ usuários ativos hoje</p>
      </div>
    </div>

    <!-- Portfólio Simulador -->
    <div class="card advanced-mode" id="portfolio">
      <h2><i class="fas fa-chart-pie"></i> Meu Portfólio</h2>
      <div class="portfolio-controls">
        <button id="addAsset" class="btn"><i class="fas fa-plus"></i> Adicionar Ativo</button>
        <button id="refreshPortfolio" class="btn" style="margin-left: 10px;"><i class="fas fa-sync-alt"></i>
          Atualizar</button>
      </div>
      <div class="portfolio-chart">
        <canvas id="portfolioChart"></canvas>
      </div>
      <div class="portfolio-table">
        <table>
          <thead>
            <tr>
              <th>Ativo</th>
              <th>Quantidade</th>
              <th>Preço Médio</th>
              <th>Valor Atual</th>
              <th>Variação</th>
              <th>Ações</th>
            </tr>
          </thead>
          <tbody id="portfolioAssets">
            <!-- Dados dinâmicos -->
          </tbody>
        </table>
      </div>
    </div>

    <!-- Fear & Greed Index -->
    <div class="card beginner-mode" id="fear-greed-section">
      <h2><i class="fas fa-brain"></i> Índice Fear & Greed (BTC)</h2>
      <div id="fear-greed">
        <div id="fear-greed-indicator"></div>
      </div>
      <p id="fear-greed-text">Carregando...</p>
      <small>Atualizado em: <span id="fg-update"></span></small>

      <!-- Texto explicativo original (mantido) -->
      <p style="margin-top: 15px; font-size: 0.9rem; color: var(--text-muted);">
        <strong>Como usar:</strong> Quando o mercado está com "Medo Extremo", pode ser uma boa hora para comprar. Quando
        está em "Euforia", pode ser hora de vender.
      </p>

    </div>
  </div>
    <!-- Mapa de Liquidações -->
    <div class="card advanced-mode" style="margin-top: 20px;">
      <h3><i class="fas fa-water"></i> Mapa de Liquidações (24h)</h3>
      <div id="liquidations-map"
        style="font-family: monospace; background: rgba(0,0,0,0.3); padding: 10px; border-radius: 5px;">
        <p>BTC: <span style="color: #ff4d4d;">$12.5M LONGs</span> liquidados</p>
        <p>ETH: <span style="color: #00ff88;">$8.2M SHORTs</span> liquidados</p>
      </div>
      <small style="color: var(--text-muted);">Dados da Binance Futures</small>
    </div>

    <!-- SIMULADOR DE PUMP/DUMP -->
    <div class="card advanced-mode" id="pump-simulator" style="margin-bottom: 30px;">
      <h2><i class="fas fa-bolt"></i> Simulador de Pump/Dump</h2>
      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 15px;">
        <div>
          <label>Moeda:</label>
          <select id="sim-coin" class="form-input">
            <option value="bitcoin">Bitcoin (BTC)</option>
            <option value="ethereum">Ethereum (ETH)</option>
            <option value="dogecoin">Dogecoin (DOGE)</option>
          </select>
        </div>
        <div>
          <label>Data do Pump:</label>
          <input type="date" id="sim-date" class="form-input">
        </div>
      </div>
      <button onclick="runPumpSimulation()" class="btn" style="margin-top: 10px;">
        <i class="fas fa-play"></i> Simular
      </button>
      <div id="sim-result" style="margin-top: 15px; display: none;">
        <h3>Resultado:</h3>
        <p id="sim-profit"></p>
        <div id="sim-chart" style="height: 200px;"></div>
      </div>
    </div>

    <script>
      // Função do simulador (coloque no seu JS)
      function runPumpSimulation() {
        const coin = document.getElementById('sim-coin').value;
        const date = document.getElementById('sim-date').value;

        // Exemplo com dados fictícios (substitua pela API CoinGecko)
        const fakeData = {
          bitcoin: { date: '2024-01-01', priceBefore: 42000, pricePeak: 52000 },
          ethereum: { date: '2024-01-01', priceBefore: 2200, pricePeak: 2700 }
        };

        const profit = ((fakeData[coin].pricePeak - fakeData[coin].priceBefore) / fakeData[coin].priceBefore * 100).toFixed(2);

        document.getElementById('sim-profit').innerHTML =
          `Se você tivesse comprado ${coin.toUpperCase()} em ${date}, teria lucrado <strong>${profit}%</strong> em 24h!`;

        document.getElementById('sim-result').style.display = 'block';

        // Geração de gráfico simples (use Chart.js no seu projeto)
        console.log("Gerar gráfico aqui com os dados...");
      }
    </script>

    <!-- Alertas de Preço -->
    <div class="card advanced-mode" id="alertas-preco">
      <h2><i class="fas fa-bell"></i> Alertas de Preço</h2>
      <div id="alertsContainer">
        <!-- Alertas serão adicionados aqui -->
      </div>
      <button id="addAlertBtn" class="btn" style="margin-top:10px;">
        <i class="fas fa-plus"></i> Criar Alerta
      </button>
    </div>

    <!-- Calculadora de Trade -->
    <div class="card advanced-mode" id="profit-calculator">
      <h2><i class="fas fa-calculator"></i> Calculadora de Trade</h2>
      <div>
        <label>Moeda:</label>
        <select id="calcCoin" class="form-input">
          <option value="bitcoin">Bitcoin (BTC)</option>
          <option value="ethereum">Ethereum (ETH)</option>
          <option value="tether">Tether (USDT)</option>
          <option value="bnb">BNB (BNB)</option>
          <option value="solana">Solana (SOL)</option>
          <option value="cardano">Cardano (ADA)</option>
          <option value="xrp">XRP (XRP)</option>
          <option value="dogecoin">Dogecoin (DOGE)</option>
        </select>
        <label>Quantidade:</label>
        <input type="number" id="calcAmount" class="form-input" placeholder="Ex: 0.5">
        <label>Preço de Compra (R$):</label>
        <input type="number" id="calcBuyPrice" class="form-input" placeholder="Ex: 100000">
        <label>Preço de Venda (R$):</label>
        <input type="number" id="calcSellPrice" class="form-input" placeholder="Ex: 120000">
        <button onclick="calculateProfit()" class="btn" style="margin-top:10px;">
          <i class="fas fa-calculator"></i> Calcular
        </button>
      </div>
      <div id="calcResult"
        style="display:none; margin-top:15px; padding:10px; background:rgba(0,255,136,0.1); border-radius:8px;">
        <h3>Resultado:</h3>
        <p id="calcProfit"></p>
        <p id="calcPercentage"></p>
      </div>
    </div>

    <!-- Risk Calculator -->
    <div class="card advanced-mode" id="risk-calculator">
      <h2><i class="fas fa-calculator"></i> Calculadora de Risco</h2>
      <div style="margin: 15px 0;">
        <label>Valor do Investimento (R$)</label>
        <input type="number" id="investment" placeholder="Ex: 1000" class="form-input">
        <label>Moeda:</label>
        <select id="coin" class="form-input">
          <option value="bitcoin">Bitcoin (BTC)</option>
          <option value="ethereum">Ethereum (ETH)</option>
          <option value="solana">Solana (SOL)</option>
          <option value="cardano">Cardano (ADA)</option>
        </select>
        <button onclick="calculateRisk()" class="btn" style="margin-top: 10px;">
          <i class="fas fa-calculator"></i> Calcular Risco
        </button>
      </div>
      <div id="risk-result">
        <h3>Recomendação:</h3>
        <p id="risk-value"></p>
        <p id="risk-explanation"></p>
        <!-- LINK ADICIONADO (após resultado) -->
        <p style="font-size: 0.9rem; color: var(--text-muted); margin-top: 10px;">
          Proteja seus investimentos com stop-loss na <a href="https://www.bybit.com/invite?ref=XQPXAMR" target="_blank"
            style="color: var(--primary);">Bybit</a>.
        </p>
      </div>
    </div>

    <!-- News Section -->
    <div class="card beginner-mode" id="news">
      <h2><i class="fas fa-newspaper"></i> Últimas Notícias</h2>
      <div id="news-container">
        <p style="color: var(--text-muted);">Carregando notícias...</p>
      </div>
    </div>

    <div class="card advanced-mode" id="plataformas"
      style="margin-top: 20px; background: rgba(0, 255, 136, 0.03); border: 1px solid rgba(0, 255, 136, 0.1);">
      <h3 style="font-size: 1.1rem; margin-bottom: 15px; display: flex; align-items: center; gap: 8px;">
        <i class="fas fa-medal" style="color: var(--primary);"></i> Melhores Plataformas
      </h3>

      <div class="platforms-grid">
        <!-- Binance -->
        <a href="https://www.binance.com/activity/referral-entry/CPA?ref=CPA_0062C7L8QA" target="_blank"
          class="platform-card binance">
          <div class="platform-header">
            <img src="assets/logo-binance.png" alt="Binance" width="30" loading="lazy">
            <div class="platform-name">Binance</div>
            <div class="platform-badge">RECOMENDADO</div>
          </div>
          <div class="platform-detail">
            <i class="fas fa-percentage"></i> Taxa 0.1%
          </div>
          <div class="platform-cta">
            ABRIR CONTA <i class="fas fa-arrow-right"></i>
          </div>
        </a>

        <!-- Bybit -->
        <a href="https://bybit.com/?ref=XQPXAMR" target="_blank" class="platform-card bybit">
          <div class="platform-header">
            <img src="assets/logo-bybit.png" alt="Bybit" width="30" loading="lazy">
            <div class="platform-name">Bybit</div>
          </div>
          <div class="platform-detail">
            <i class="fas fa-arrow-trend-up"></i> Alavancagem 25x
          </div>
          <div class="platform-cta">
            COMEÇAR <i class="fas fa-arrow-right"></i>
          </div>
        </a>
      </div>
    </div>

    <!-- Seção Educativa -->
    <div class="card beginner-mode" id="educativa">
      <h2><i class="fas fa-graduation-cap"></i> Educação Cripto</h2>

      <!-- Abas de navegação -->
      <div class="tab-buttons">
        <button class="tab-btn active" onclick="openTab('glossario')">Glossário</button>
        <button class="tab-btn" onclick="openTab('tutoriais')">Tutoriais</button>
      </div>

      <!-- Conteúdo do Glossário -->
      <div id="glossario" class="tab-content" style="display: block;">
        <div class="search-box">
          <input type="text" id="glossarioSearch" placeholder="Buscar termo..." class="form-input">
          <i class="fas fa-search"></i>
        </div>
        <div class="glossario-grid" id="glossarioContent"></div>
      </div>

      <!-- Conteúdo dos Tutoriais -->
      <div id="tutoriais" class="tab-content">
        <div class="tutoriais-grid" id="tutoriaisContent"></div>
      </div>
    </div>

    <!-- Feedback -->
    <div class="card" id="feedback">
      <h2><i class="fas fa-comment-dots"></i> Deixe seu Feedback</h2>
      <form action="https://formsubmit.co/trackcripto@gmail.com" method="POST">
        <input type="hidden" name="_captcha" value="false">
        <input type="hidden" name="_next" value="https://trackcripto.netlify.app/">

        <div style="margin-bottom: 15px;">
          <label>O que você achou do site?</label>
          <textarea name="feedback" class="form-input" rows="4" placeholder="Sua opinião aqui..." required></textarea>
        </div>

        <button type="submit" class="btn">
          <i class="fas fa-paper-plane"></i> Enviar Feedback
        </button>
      </form>
    </div>





    </div>
    </div>
    </div>
  </main>

  <footer>
    <div class="footer-content">
      <div class="footer-section">
        <h4>TrackCripto</h4>
        <p>Sua ferramenta completa para análise de criptomoedas</p>
      </div>
      <div class="footer-section">
        <h4>Links</h4>
        <ul>
          <li><a href="#termos">Termos de Uso</a></li>
          <li><a href="#privacidade">Política de Privacidade</a></li>
          <li><a href="#feedback">Contato</a></li>
        </ul>
      </div>
      <div class="footer-section">
        <h4>Apoie o projeto</h4>
        <p>Chave PIX: trackcripto@gmail.com</p>
      </div>
    </div>
    <div class="footer-bottom">
      <p>&copy; 2025 TrackCripto. Todos os direitos reservados.</p>
    </div>
  </footer>

  <style>
    footer {
      background: var(--card);
      padding: 30px 0 15px;
      margin-top: 40px;
      border-top: 1px solid rgba(0, 255, 136, 0.1);
    }

    .footer-content {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 30px;
      max-width: 1200px;
      margin: 0 auto 20px;
      padding: 0 20px;
    }

    .footer-section h4 {
      color: var(--primary);
      margin-bottom: 15px;
    }

    .footer-section ul {
      list-style: none;
      padding: 0;
    }

    .footer-section li {
      margin-bottom: 8px;
    }

    .footer-section a {
      color: var(--text-muted);
      text-decoration: none;
      transition: color 0.3s;
    }

    .footer-section a:hover {
      color: var(--primary);
    }

    .footer-bottom {
      text-align: center;
      padding-top: 15px;
      border-top: 1px solid rgba(0, 255, 136, 0.1);
      color: var(--text-muted);
      font-size: 0.9rem;
    }

    /* === NAV MOBILE BONITA === */
@media (max-width: 768px) {
  .app-header nav.main-nav {
    position: fixed;
    top: 0;
    right: 0;
    bottom: 0;
    width: min(78vw, 320px);
    background: var(--card);
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    padding: 80px 20px 20px; /* espaço pro topo */
    transform: translateX(100%);
    transition: transform .3s ease;
    z-index: 2000; /* fica acima do conteúdo */
    box-shadow: -6px 0 20px rgba(0,0,0,.4);
  }

  .app-header nav.main-nav.active {
    transform: translateX(0);
  }

  /* remove as bolinhas */
  .app-header nav.main-nav ul {
    list-style: none;
    margin: 0;
    padding: 0;
    display: flex;
    flex-direction: column;
    gap: 18px;
  }

  /* links bonitos */
  .app-header nav.main-nav a {
    text-decoration: none;
    font-size: 1.2rem;
    color: var(--text);
    padding: 10px 15px;
    border-radius: 8px;
    transition: background .3s, color .3s;
    display: flex;
    align-items: center;
    gap: 10px;
  }

  /* hover */
  .app-header nav.main-nav a:hover {
    background: var(--primary);
    color: #fff;
  }
}

  </style>

  <!-- Chat IA -->
  <div id="aiChatContainer">
    <div
      style="padding: 15px; background: rgba(0, 255, 136, 0.1); display: flex; justify-content: space-between; align-items: center;">
      <h3 style="color: #00ff88; margin: 0;"><i class="fas fa-robot"></i> Assistente Cripto</h3>
      <button id="closeChat" style="background: none; border: none; color: #ffffff; cursor: pointer;"><i
          class="fas fa-times"></i></button>
    </div>
    <div id="chatContent" style="padding: 15px; height: 300px; overflow-y: auto;">
      <div style="background: rgba(0, 255, 136, 0.1); padding: 10px; border-radius: 8px; margin-bottom: 10px;">
        <p style="margin: 0; color: #00ff88;">Olá! Sou seu assistente de criptomoedas. Pergunte sobre BTC, ETH ou
          estratégias de trading!</p>
      </div>
    </div>
    <div style="padding: 15px; border-top: 1px solid rgba(0, 255, 136, 0.1); display: flex;">
      <input type="text" id="userInput" placeholder="Digite sua pergunta..."
        style="flex: 1; padding: 10px; border: 1px solid #00ff88; border-radius: 8px; background: rgba(0, 0, 0, 0.3); color: white;">
      <button id="sendMessage"
        style="background: #00ff88; color: #1a1a2e; border: none; padding: 0 15px; margin-left: 10px; border-radius: 8px; cursor: pointer;"><i
          class="fas fa-paper-plane"></i></button>
    </div>
  </div>

  <button id="chatToggle">
    <i class="fas fa-robot" style="font-size: 28px; color: #1a1a2e;"></i>
  </button>



  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script>
    // VERSÃO COMPLETA E TESTADA - ATUALIZADA
    document.addEventListener('DOMContentLoaded', async function () {
      console.log("Iniciando TrackCripto...");

      // 1. ELEMENTOS DA UI
      const elements = {
        price: document.getElementById('price'),
        variation: document.getElementById('variation'),
        rank: document.getElementById('rank'),
        marketCap: document.getElementById('market-cap'),
        volume: document.getElementById('volume'),
        supply: document.getElementById('supply'),
        fearGreedText: document.getElementById('fear-greed-text'),
        fearGreedIndicator: document.getElementById('fear-greed-indicator'),
        newsContainer: document.getElementById('news-container'),
        chatInput: document.getElementById('userInput'),
        chatContent: document.getElementById('chatContent'),
        cryptoName: document.getElementById('cryptoName'),
        riskValue: document.getElementById('risk-value'),
        riskExplanation: document.getElementById('risk-explanation'),
        riskResult: document.getElementById('risk-result')
      };

      // Lista de criptomoedas para o portfólio
      const coins = [
        { id: "bitcoin", name: "Bitcoin (BTC)" },
        { id: "ethereum", name: "Ethereum (ETH)" },
        { id: "tether", name: "Tether (USDT)" },
        { id: "bnb", name: "BNB (BNB)" },
        { id: "solana", name: "Solana (SOL)" },
        { id: "cardano", name: "Cardano (ADA)" },
        { id: "xrp", name: "XRP (XRP)" },
        { id: "dogecoin", name: "Dogecoin (DOGE)" }
      ];

      // 2. FUNÇÃO DE FETCH COM TRATAMENTO DE ERROS
      async function safeFetch(url) {
        try {
          const response = await fetch(url);
          if (!response.ok) throw new Error(`Erro HTTP: ${response.status}`);
          return await response.json();
        } catch (error) {
          console.error("Erro na requisição:", error);
          return null;
        }
      }

      // 3. ATUALIZAÇÃO DE DADOS DA CRIPTO
      async function updateCryptoData() {
        const moeda = document.getElementById('moedaSelect').value;
        const data = await safeFetch(
          `https://api.coingecko.com/api/v3/simple/price?ids=${moeda}&vs_currencies=brl&include_24hr_change=true`
        );

        if (data && data[moeda]) {
          elements.price.textContent = `R$ ${data[moeda].brl.toLocaleString('pt-BR', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;
          const change = data[moeda].brl_24h_change;
          elements.variation.innerHTML = `Variação 24h: <span style="color:${change >= 0 ? '#00ff88' : '#ff4d4d'}">${change.toFixed(2)}%</span>`;
        }
      }

      // 4. MÉTRICAS AVANÇADAS
      async function updateAdvancedMetrics() {
        const moeda = document.getElementById('moedaSelect').value;
        const data = await safeFetch(`https://api.coingecko.com/api/v3/coins/${moeda}`);

        if (data) {
          elements.rank.textContent = data.market_cap_rank || '--';
          elements.marketCap.textContent = `R$ ${(data.market_data.market_cap.brl / 1000000000).toFixed(2)}B`;
          elements.volume.textContent = `R$ ${(data.market_data.total_volume.brl / 1000000000).toFixed(1)}B`;
          if (data.market_data.circulating_supply) {
            elements.supply.textContent = `${data.market_data.circulating_supply.toLocaleString('pt-BR')} ${data.symbol.toUpperCase()}`;
          }
          elements.cryptoName.textContent = `${data.name} (${data.symbol.toUpperCase()})`;
        }
      }

      // 5. FEAR & GREED INDEX
      async function updateFearGreed() {
        const data = await safeFetch('https://api.alternative.me/fng/?limit=1');

        if (data && data.data) {
          const value = data.data[0].value;
          elements.fearGreedIndicator.style.left = `${value}%`;
          elements.fearGreedText.textContent = `${value} - ${data.data[0].value_classification}`;
          document.getElementById('fg-update').textContent = new Date(data.data[0].timestamp * 1000).toLocaleString('pt-BR');
        }
      }

      // 6. GRÁFICO DE PREÇOS
      async function initChart() {
        const moeda = document.getElementById('moedaSelect').value;
        const ctx = document.getElementById('graficoBTC').getContext('2d');
        const data = await safeFetch(`https://api.coingecko.com/api/v3/coins/${moeda}/market_chart?vs_currency=brl&days=7`);

        if (data) {
          if (window.btcChart) window.btcChart.destroy();

          const labels = data.prices.map(price =>
            new Date(price[0]).toLocaleDateString('pt-BR', { day: 'numeric', month: 'short' })
          );
          const prices = data.prices.map(price => price[1]);

          // Configuração otimizada para mobile
          window.btcChart = new Chart(ctx, {
            type: 'line',
            data: {
              labels: labels,
              datasets: [{
                label: `Preço ${moeda.toUpperCase()} (R$)`,
                data: prices,
                borderColor: '#00ff88',
                backgroundColor: 'rgba(0, 255, 136, 0.05)',
                borderWidth: 2,
                pointRadius: mobile ? 2 : 3, // Pontos menores em mobile
                pointBackgroundColor: '#00ff88',
                pointHoverRadius: 4,
                fill: true,
                tension: 0.3 // Linha mais suave
              }]
            },
            options: {
              responsive: true,
              maintainAspectRatio: false,
              plugins: {
                legend: {
                  display: false // Remove a legenda em mobile
                },
                tooltip: {
                  mode: 'index',
                  intersect: false,
                  displayColors: false,
                  callbacks: {
                    label: (ctx) => `R$ ${ctx.parsed.y.toLocaleString('pt-BR')}`
                  }
                }
              },
              scales: {
                x: {
                  grid: { display: false }, // Remove grid vertical
                  ticks: {
                    color: 'rgba(255, 255, 255, 0.7)',
                    maxRotation: 0, // Rótulos horizontais
                    autoSkip: true,
                    maxTicksLimit: mobile ? 4 : 7 // Mostra apenas 4 labels em mobile
                  }
                },
                y: {
                  grid: { color: 'rgba(255, 255, 255, 0.05)' },
                  ticks: {
                    color: 'rgba(255, 255, 255, 0.7)',
                    callback: (value) => `R$ ${(value / 1000).toFixed(0)}k` // Formata como "R$ 650k"
                  }
                }
              },
              interaction: { mode: 'nearest' }
            }
          });
        }
      }

      // Detecta mobile
      const mobile = window.innerWidth <= 768;
      // 7. CALCULADORA DE RISCO
      function setupRiskCalculator() {
        document.getElementById('coin').addEventListener('change', function () {
          document.getElementById('risk-result').style.display = 'none';
        });

        document.getElementById('investment').addEventListener('input', function () {
          document.getElementById('risk-result').style.display = 'none';
        });

        // Atualize a função calculateRisk() para:
        window.calculateRisk = function () {
          const investment = parseFloat(document.getElementById('investment').value);
          const coin = document.getElementById('coin').value;

          if (!investment || investment <= 0) {
            alert("Por favor, insira um valor válido!");
            return;
          }

          const volatilityData = {
            bitcoin: 2.1,
            ethereum: 3.5,
            solana: 4.8,
            cardano: 3.2
          };

          const volatility = volatilityData[coin] || 3.0;
          const maxRecommended = (investment * 0.02) / (volatility / 100);

          document.getElementById('risk-value').innerHTML = `
            <strong>Valor máximo recomendado por trade:</strong> R$ ${maxRecommended.toFixed(2)}<br>
            <strong>Volatilidade histórica:</strong> ${volatility}%
          `;

          document.getElementById('risk-explanation').textContent =
            `Baseado na volatilidade histórica do ${coin.toUpperCase()}, recomendamos não arriscar mais que R$ ${maxRecommended.toFixed(2)} em uma única operação.`;

          document.getElementById('risk-result').style.display = 'block';
        }
      }

      // 8. CHAT IA
      function setupChat() {
        const chatToggle = document.getElementById('chatToggle');
        const chatContainer = document.getElementById('aiChatContainer');
        const closeChat = document.getElementById('closeChat');

        chatToggle.addEventListener('click', () => {
          chatContainer.style.display = chatContainer.style.display === 'none' ? 'block' : 'none';
        });

        closeChat.addEventListener('click', () => {
          chatContainer.style.display = 'none';
        });

        document.getElementById('sendMessage').addEventListener('click', sendMessage);
        document.getElementById('userInput').addEventListener('keypress', (e) => {
          if (e.key === 'Enter') sendMessage();
        });

        function sendMessage() {
          const message = elements.chatInput.value.trim();
          if (!message) return;

          // Mensagem do usuário
          elements.chatContent.innerHTML += `
            <div style="text-align:right; margin:10px 0">
              <div style="display:inline-block; background:rgba(0,255,136,0.2); padding:8px 12px; border-radius:12px 12px 0 12px">
                ${message}
              </div>
            </div>
          `;

          // Resposta da IA
          setTimeout(() => {
            elements.chatContent.innerHTML += `
              <div style="margin:10px 0">
                <div style="display:inline-block; background:rgba(0,255,136,0.1); padding:8px 12px; border-radius:12px 12px 12px 0">
                  ${getAIResponse(message)}
                </div>
              </div>
            `;
            elements.chatContent.scrollTop = elements.chatContent.scrollHeight;
          }, 500);

          elements.chatInput.value = '';
        }

        function getAIResponse(message) {
          const lowerMsg = message.toLowerCase();
          const responses = {
            bitcoin: [
              `📊 BTC está cotado a ${elements.price.textContent} (${document.getElementById('variation').textContent})`,
              "🔍 Bitcoin está mostrando forte resistência nos níveis atuais!",
              "💡 Dica: Analise o gráfico para identificar tendências"
            ],
            ethereum: [
              "🦄 Ethereum está em alta com a próxima atualização da rede",
              "💎 ETH/BTC pair mostra fortalecimento"
            ],
            default: [
              "Pergunte sobre Bitcoin ou Ethereum!",
              "Posso ajudar com análises de BTC e ETH"
            ]
          };

          if (lowerMsg.includes('bitcoin') || lowerMsg.includes('btc')) {
            return responses.bitcoin[Math.floor(Math.random() * responses.bitcoin.length)];
          } else if (lowerMsg.includes('ethereum') || lowerMsg.includes('eth')) {
            return responses.ethereum[Math.floor(Math.random() * responses.ethereum.length)];
          }
          return responses.default[Math.floor(Math.random() * responses.default.length)];
        }
      }

      // 9. NOTÍCIAS
      async function loadNews() {
        try {
          // API alternativa para notícias (substitua por uma API real se necessário)
          elements.newsContainer.innerHTML = `
            <div style="margin-bottom:15px">
              <h3>Bitcoin atinge novo recorde histórico</h3>
              <p style="color:#aaa">O BTC superou a marca de R$ 650k nesta semana</p>
             
            <div style="margin-bottom:15px">
              <h3>Ethereum anuncia atualização da rede</h3>
              <p style="color:#aaa">A atualização deve melhorar as taxas de transação</p>
              
          `;
        } catch (error) {
          console.error("Erro ao carregar notícias:", error);
          elements.newsContainer.innerHTML = '<p style="color:#ff4d4d">Notícias indisponíveis no momento</p>';
        }
      }

      // 10. ÍNDICES DE MERCADO - VERSÃO FINAL
      const MarketIndices = {
        init() {
          this.setupEventListeners();
          this.loadInitialData();
        },

        setupEventListeners() {
          const refreshBtn = document.getElementById('refreshIndicesBtn');
          if (refreshBtn) {
            refreshBtn.addEventListener('click', () => {
              this.loadData();
            });
          }
        },

        loadInitialData() {
          this.loadData();
          setInterval(() => this.loadData(), 300000); // Atualiza a cada 5 minutos
        },

        async loadData() {
          this.showLoadingState(true);

          try {
            const data = await this.fetchMarketData();
            this.updateMarketUI(data);
          } catch (error) {
            console.error("Erro ao carregar dados:", error);
            this.showErrorState();
          }
        },

        async fetchMarketData() {
          const response = await fetch('https://api.coingecko.com/api/v3/global');
          if (!response.ok) throw new Error(`Erro HTTP: ${response.status}`);
          const data = await response.json();
          return data.data;
        },

        updateMarketUI(data) {
          this.updateTimestamp();
          this.updateBTCDominance(data.market_cap_percentage.btc);
          this.updateAltcoinSeason(data);
        },

        updateTimestamp() {
          const timeElement = document.getElementById('lastUpdateTime');
          if (timeElement) {
            timeElement.textContent = new Date().toLocaleTimeString('pt-BR', {
              hour: '2-digit',
              minute: '2-digit'
            });
          }
        },

        updateBTCDominance(btcDominance) {
          const dominanceValue = btcDominance.toFixed(1);
          const valueElement = document.getElementById('btcDominanceValue');
          const barElement = document.getElementById('btcDominanceBar');

          if (valueElement) valueElement.textContent = `${dominanceValue}%`;
          if (barElement) barElement.style.width = `${dominanceValue}%`;
        },

        updateAltcoinSeason(data) {
          const btcDominance = data.market_cap_percentage.btc;
          const totalMarketCap = (data.total_market_cap.usd / 1000000000).toFixed(2);
          const altcoinDominance = 100 - btcDominance;

          const marketCapElement = document.getElementById('totalMarketCap');
          const seasonIndicator = document.getElementById('seasonIndicator');
          const statusTextElement = document.getElementById('seasonStatusText');
          const errorElement = document.getElementById('btcChartError');

          if (marketCapElement) marketCapElement.textContent = `$${totalMarketCap}B`;

          if (seasonIndicator) {
            seasonIndicator.style.background =
              `linear-gradient(90deg, #2ecc71 ${altcoinDominance}%, #e0e0e0 ${altcoinDominance}%)`;
          }

          if (statusTextElement) {
            statusTextElement.textContent =
              altcoinDominance > 35 ? "🚀 ALTCOIN SEASON!" : `📉 Bitcoin Dominante (${btcDominance.toFixed(1)}%)`;
          }

          if (errorElement) errorElement.style.display = 'none';
        },

        showLoadingState(loading) {
          const loadingText = loading ? '...' : '';
          const loadingStatus = loading ? 'Atualizando...' : '';

          const valueElement = document.getElementById('btcDominanceValue');
          const statusElement = document.getElementById('seasonStatusText');

          if (valueElement) valueElement.textContent = loadingText;
          if (statusElement) statusElement.textContent = loadingStatus;
        },

        showErrorState() {
          const errorElement = document.getElementById('btcChartError');
          const statusElement = document.getElementById('seasonStatusText');

          if (errorElement) errorElement.style.display = 'block';
          if (statusElement) statusElement.textContent = 'Dados temporariamente indisponíveis';
        }
      };

      // 11. PORTFÓLIO SIMULADOR
      class PortfolioSimulator {
        constructor() {
          this.assets = JSON.parse(localStorage.getItem('portfolio')) || [];
          this.init();
        }

        init() {
          document.getElementById('addAsset').addEventListener('click', this.showAddDialog.bind(this));
          document.getElementById('refreshPortfolio').addEventListener('click', this.refreshPortfolio.bind(this));
          this.render();
        }

        showAddDialog() {
          // Modal para adicionar novo ativo
          Swal.fire({
            title: 'Adicionar Ativo',
            html: `
              <select id="swalCoin" class="swal2-select">
                ${coins.map(c => `<option value="${c.id}">${c.name}</option>`).join('')}
              </select>
              <input type="number" id="swalAmount" placeholder="Quantidade" class="swal2-input">
              <input type="number" id="swalPrice" placeholder="Preço pago (R$)" class="swal2-input">
            `,
            showCancelButton: true,
            confirmButtonText: 'Adicionar',
            preConfirm: () => {
              return {
                coin: document.getElementById('swalCoin').value,
                amount: parseFloat(document.getElementById('swalAmount').value),
                buyPrice: parseFloat(document.getElementById('swalPrice').value)
              }
            }
          }).then(result => {
            if (result.isConfirmed) {
              this.addAsset(result.value);
            }
          });
        }

        addAsset(asset) {
          this.assets.push(asset);
          this.save();
          this.render();

          // Microinteração: Confirmação visual
          const confirmation = document.createElement('div');
          confirmation.className = 'portfolio-confirmation';
          confirmation.innerHTML = `<i class="fas fa-check"></i> ${asset.coin} adicionado!`;
          document.getElementById('portfolio').appendChild(confirmation);
          setTimeout(() => confirmation.remove(), 2000);
        }

        removeAsset(index) {
          this.assets.splice(index, 1);
          this.save();
          this.render();
        }

        async refreshPortfolio() {
          // Mostra animação de atualização
          document.getElementById('portfolio').classList.add('updating');
          setTimeout(() => {
            document.getElementById('portfolio').classList.remove('updating');
          }, 1000);

          this.render();
        }

        save() {
          localStorage.setItem('portfolio', JSON.stringify(this.assets));
        }

        async render() {
          // Atualiza tabela e gráfico de pizza
          await this.updateTable();
          this.updateChart();
        }

        async updateTable() {
          const tableBody = document.getElementById('portfolioAssets');
          tableBody.innerHTML = '';

          if (this.assets.length === 0) {
            tableBody.innerHTML = `
              <tr>
                <td colspan="6" style="text-align: center; color: var(--text-muted);">
                  Nenhum ativo adicionado. Clique em "Adicionar Ativo" para começar.
                </td>
              </tr>
            `;
            return;
          }

          // Busca preços atuais em paralelo
          const coinIds = this.assets.map(a => a.coin);
          const pricesResponse = await fetch(`https://api.coingecko.com/api/v3/simple/price?ids=${coinIds.join(',')}&vs_currencies=brl`);
          const prices = await pricesResponse.json();

          let totalValue = 0;
          let totalProfit = 0;

          this.assets.forEach((asset, index) => {
            const currentPrice = prices[asset.coin]?.brl || 0;
            const value = asset.amount * currentPrice;
            const cost = asset.amount * asset.buyPrice;
            const profit = value - cost;
            const profitPercentage = (profit / cost) * 100;

            totalValue += value;
            totalProfit += profit;

            const row = document.createElement('tr');
            row.innerHTML = `
              <td>${coins.find(c => c.id === asset.coin)?.name || asset.coin}</td>
              <td>${asset.amount.toLocaleString('pt-BR')}</td>
              <td>R$ ${asset.buyPrice.toLocaleString('pt-BR', { minimumFractionDigits: 2 })}</td>
              <td>R$ ${value.toLocaleString('pt-BR', { minimumFractionDigits: 2 })}</td>
              <td style="color:${profit >= 0 ? '#00ff88' : '#ff4d4d'}">
                ${profit >= 0 ? '+' : ''}${profit.toLocaleString('pt-BR', { minimumFractionDigits: 2 })} (${profitPercentage.toFixed(2)}%)
              </td>
              <td>
                <button class="btn" style="padding: 5px 10px; background: var(--error);" onclick="portfolio.removeAsset(${index})">
                  <i class="fas fa-trash"></i>
                </button>
              </td>
            `;
            tableBody.appendChild(row);
          });

          // Adiciona linha de totais
          const totalRow = document.createElement('tr');
          totalRow.style.fontWeight = 'bold';
          totalRow.innerHTML = `
            <td colspan="3">Total</td>
            <td>R$ ${totalValue.toLocaleString('pt-BR', { minimumFractionDigits: 2 })}</td>
            <td style="color:${totalProfit >= 0 ? '#00ff88' : '#ff4d4d'}">
              ${totalProfit >= 0 ? '+' : ''}${totalProfit.toLocaleString('pt-BR', { minimumFractionDigits: 2 })}
            </td>
            <td></td>
          `;
          tableBody.appendChild(totalRow);
        }

        updateChart() {
          const ctx = document.getElementById('portfolioChart').getContext('2d');

          if (this.assets.length === 0) {
            if (window.portfolioChart) {
              window.portfolioChart.destroy();
            }
            return;
          }

          // Agrupa ativos por moeda
          const grouped = {};
          this.assets.forEach(asset => {
            if (!grouped[asset.coin]) {
              grouped[asset.coin] = {
                amount: 0,
                buyPrice: asset.buyPrice,
                name: coins.find(c => c.id === asset.coin)?.name || asset.coin
              };
            }
            grouped[asset.coin].amount += asset.amount;
          });

          // Prepara dados para o gráfico
          const labels = Object.keys(grouped).map(coinId => grouped[coinId].name);
          const data = Object.keys(grouped).map(coinId => {
            return grouped[coinId].amount * grouped[coinId].buyPrice;
          });

          const backgroundColors = [
            '#00ff88', '#00cc6a', '#00994c',
            '#00662e', '#003319', '#00a55a',
            '#008548', '#006536'
          ];

          if (window.portfolioChart) {
            window.portfolioChart.destroy();
          }

          window.portfolioChart = new Chart(ctx, {
            type: 'doughnut',
            data: {
              labels: labels,
              datasets: [{
                data: data,
                backgroundColor: backgroundColors,
                borderColor: 'rgba(0, 0, 0, 0.1)',
                borderWidth: 1
              }]
            },
            options: {
              responsive: true,
              maintainAspectRatio: false,
              plugins: {
                legend: {
                  position: 'right',
                  labels: {
                    color: 'var(--text)'
                  }
                },
                tooltip: {
                  callbacks: {
                    label: function (context) {
                      return ` R$ ${context.raw.toLocaleString('pt-BR', { minimumFractionDigits: 2 })}`;
                    }
                  }
                }
              }
            }
          });
        }
      }

      // 12. ALERTAS DE PREÇO - NOVA CLASSE ADICIONADA
      class PriceAlerts {
        constructor() {
          this.alerts = JSON.parse(localStorage.getItem('priceAlerts')) || [];
          this.init();
        }

        init() {
          document.getElementById('addAlertBtn').addEventListener('click', () => this.showAddDialog());
          this.render();
          setInterval(() => this.checkAlerts(), 300000); // Verifica a cada 5 minutos
        }

        showAddDialog() {
          const currentCoin = document.getElementById('moedaSelect').value;
          Swal.fire({
            title: 'Criar Alerta',
            html: `
              <select id="swalAlertCoin" class="swal2-select">
                ${coins.map(c => `<option value="${c.id}" ${c.id === currentCoin ? 'selected' : ''}>${c.name}</option>`).join('')}
              </select>
              <select id="swalAlertCondition" class="swal2-select">
                <option value="above">Acima de</option>
                <option value="below">Abaixo de</option>
              </select>
              <input type="number" id="swalAlertPrice" placeholder="Preço em R$" class="swal2-input" step="0.0001">
            `,
            confirmButtonText: 'Salvar',
            preConfirm: () => {
              return {
                coin: document.getElementById('swalAlertCoin').value,
                condition: document.getElementById('swalAlertCondition').value,
                price: parseFloat(document.getElementById('swalAlertPrice').value),
                id: Date.now()
              };
            }
          }).then(result => {
            if (result.isConfirmed) {
              this.addAlert(result.value);
            }
          });
        }

        addAlert(alert) {
          this.alerts.push(alert);
          this.save();
          this.render();
          Swal.fire('Sucesso!', 'Alerta criado com sucesso.', 'success');
        }

        async checkAlerts() {
          if (this.alerts.length === 0) return;

          const coinIds = [...new Set(this.alerts.map(a => a.coin))];
          const prices = await safeFetch(`https://api.coingecko.com/api/v3/simple/price?ids=${coinIds.join(',')}&vs_currencies=brl`);

          this.alerts.forEach(alert => {
            const currentPrice = prices[alert.coin]?.brl;
            if (!currentPrice) return;

            const isTriggered = (
              (alert.condition === 'above' && currentPrice >= alert.price) ||
              (alert.condition === 'below' && currentPrice <= alert.price)
            );

            if (isTriggered) {
              this.triggerAlert(alert, currentPrice);
            }
          });
        }

        triggerAlert(alert, currentPrice) {
          // Remove o alerta após disparar
          this.alerts = this.alerts.filter(a => a.id !== alert.id);
          this.save();
          this.render();

          // Notificação
          Swal.fire({
            title: 'Alerta Disparado!',
            html: `<b>${coins.find(c => c.id === alert.coin)?.name}</b> está <b>R$ ${currentPrice.toFixed(2)}</b><br>
                   (${alert.condition === 'above' ? 'Acima' : 'Abaixo'} de R$ ${alert.price.toFixed(2)})`,
            icon: 'info',
            confirmButtonText: 'OK'
          });
        }

        render() {
          const container = document.getElementById('alertsContainer');
          container.innerHTML = this.alerts.length === 0
            ? '<p style="color:var(--text-muted); text-align:center;">Nenhum alerta ativo</p>'
            : this.alerts.map(alert => `
                <div class="alert-item">
                  <div>
                    <strong>${coins.find(c => c.id === alert.coin)?.name}</strong><br>
                    <small>${alert.condition === 'above' ? 'Acima de' : 'Abaixo de'} R$ ${alert.price.toFixed(2)}</small>
                  </div>
                  <button onclick="alerts.removeAlert(${alert.id})" style="background:none; border:none; color:var(--error); cursor:pointer;">
                    <i class="fas fa-trash"></i>
                  </button>
                </div>
              `).join('');
        }

        removeAlert(id) {
          this.alerts = this.alerts.filter(a => a.id !== id);
          this.save();
          this.render();
        }

        save() {
          localStorage.setItem('priceAlerts', JSON.stringify(this.alerts));
        }
      }

      // 13. CALCULADORA DE TRADE - NOVA FUNÇÃO ADICIONADA
      window.calculateProfit = function () {
        const coin = document.getElementById('calcCoin').value;
        const amount = parseFloat(document.getElementById('calcAmount').value);
        const buyPrice = parseFloat(document.getElementById('calcBuyPrice').value);
        const sellPrice = parseFloat(document.getElementById('calcSellPrice').value);

        if (!amount || !buyPrice || !sellPrice) {
          Swal.fire('Erro', 'Preencha todos os campos!', 'error');
          return;
        }

        const profit = (sellPrice - buyPrice) * amount;
        const percentage = ((sellPrice / buyPrice) - 1) * 100;

        document.getElementById('calcProfit').innerHTML = `
          <strong>Lucro/Prejuízo:</strong> R$ ${profit.toFixed(2)} 
          <span style="color:${profit >= 0 ? '#00ff88' : '#ff4d4d'}">
            (${profit >= 0 ? '+' : ''}${profit.toFixed(2)})
          </span>
        `;

        document.getElementById('calcPercentage').innerHTML = `
          <strong>Variação:</strong> 
          <span style="color:${percentage >= 0 ? '#00ff88' : '#ff4d4d'}">
            ${percentage >= 0 ? '+' : ''}${percentage.toFixed(2)}%
          </span>
        `;

        document.getElementById('calcResult').style.display = 'block';
      };

      // 14. MICROINTERAÇÕES
      function setupMicrointeractions() {
        // Atualização de dados
        document.querySelectorAll('[data-refresh]').forEach(btn => {
          btn.addEventListener('click', () => {
            btn.querySelector('i').classList.add('fa-spin');
            setTimeout(() => {
              btn.querySelector('i').classList.remove('fa-spin');
            }, 1000);
          });
        });

        // Efeito de hover em cards
        document.querySelectorAll('.card').forEach(card => {
          card.addEventListener('mouseenter', () => {
            card.style.transform = 'translateY(-5px)';
            card.style.boxShadow = '0 10px 20px rgba(0, 255, 136, 0.2)';
          });

          card.addEventListener('mouseleave', () => {
            card.style.transform = '';
            card.style.boxShadow = '';
          });
        });
      }

      // 15. SEÇÃO EDUCATIVA
      function setupEducativa() {
        // Dados do glossário
        const glossario = [
          {
            termo: "Blockchain",
            definicao: "Tecnologia de registro distribuído que mantém registros permanentes e à prova de violação de dados."
          },
          {
            termo: "Wallet",
            definicao: "Carteira digital usada para armazenar, enviar e receber criptomoedas."
          },
          {
            termo: "DeFi",
            definicao: "Sistemas financeiros descentralizados que operam sem intermediários como bancos."
          },
          {
            termo: "NFT",
            definicao: "Token não fungível que representa propriedade de um item digital único."
          },
          {
            termo: "Smart Contract",
            definicao: "Contrato auto-executável com termos escritos em código de programação."
          },
          {
            termo: "Stablecoin",
            definicao: "Criptomoeda atrelada a um ativo estável como o dólar americano."
          }
        ];

        // Dados dos tutoriais
        const tutoriais = [
          {
            titulo: "Como Criar sua Primeira Carteira",
            descricao: "Guia passo a passo para configurar uma carteira de criptomoedas segura.",
            dificuldade: "Iniciante",
            tempo: "5 min"
          },
          {
            titulo: "Primeira Compra de Bitcoin",
            descricao: "Aprenda a comprar seu primeiro Bitcoin em uma exchange confiável.",
            dificuldade: "Iniciante",
            tempo: "10 min"
          },
          {
            titulo: "Segurança Avançada para Carteiras",
            descricao: "Técnicas profissionais para proteger seus ativos digitais.",
            dificuldade: "Avançado",
            tempo: "15 min"
          }
        ];

        // Carrega o glossário
        const glossarioContent = document.getElementById('glossarioContent');
        glossario.forEach(termo => {
          glossarioContent.innerHTML += `
            <div class="termo-card">
              <h3>${termo.termo}</h3>
              <p>${termo.definicao}</p>
            </div>
          `;
        });

        // Carrega os tutoriais
        const tutoriaisContent = document.getElementById('tutoriaisContent');
        tutoriais.forEach(tutorial => {
          tutoriaisContent.innerHTML += `
            <div class="tutorial-card" onclick="openTutorial('${tutorial.titulo}')">
              <span class="dificuldade">${tutorial.dificuldade}</span>
              <h3>${tutorial.titulo}</h3>
              <p>${tutorial.descricao}</p>
              <div class="tempo"><i class="far fa-clock"></i> ${tutorial.tempo}</div>
            </div>
          `;
        });

        // Busca no glossário
        document.getElementById('glossarioSearch').addEventListener('input', (e) => {
          const searchTerm = e.target.value.toLowerCase();
          const cards = document.querySelectorAll('.termo-card');

          cards.forEach(card => {
            const termo = card.querySelector('h3').textContent.toLowerCase();
            card.style.display = termo.includes(searchTerm) ? 'block' : 'none';
          });
        });
      }

      // Funções para abrir abas e tutoriais
      function openTab(tabName) {
        const tabContents = document.querySelectorAll('.tab-content');
        const tabButtons = document.querySelectorAll('.tab-btn');

        tabContents.forEach(tab => {
          tab.style.display = 'none';
        });

        tabButtons.forEach(btn => {
          btn.classList.remove('active');
        });

        document.getElementById(tabName).style.display = 'block';
        event.currentTarget.classList.add('active');
      }

      function openTutorial(title) {
        alert(`Abrindo tutorial: ${title}\n\nEsta funcionalidade pode ser expandida para mostrar um modal ou página detalhada.`);
      }

      // 16. THEME TOGGLE
      function setupThemeToggle() {
        const themeToggle = document.getElementById('themeToggle');
        const icon = themeToggle.querySelector('i');

        // Verifica o tema salvo ou preferência do sistema
        const savedTheme = localStorage.getItem('theme');
        const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

        const initialTheme = savedTheme || (systemPrefersDark ? 'dark' : 'light');
        document.documentElement.setAttribute('data-theme', initialTheme);
        updateToggleButton(initialTheme);

        // Alterna entre temas
        themeToggle.addEventListener('click', () => {
          const currentTheme = document.documentElement.getAttribute('data-theme');
          const newTheme = currentTheme === 'dark' ? 'light' : 'dark';

          document.documentElement.setAttribute('data-theme', newTheme);
          localStorage.setItem('theme', newTheme);
          updateToggleButton(newTheme);
        });

        function updateToggleButton(theme) {
          if (theme === 'dark') {
            themeToggle.innerHTML = '<i class="fas fa-moon"></i> Modo Escuro';
            themeToggle.style.backgroundColor = 'var(--card)';
            themeToggle.style.color = 'var(--text)';
          } else {
            themeToggle.innerHTML = '<i class="fas fa-sun"></i> Modo Claro';
            themeToggle.style.backgroundColor = 'var(--primary)';
            themeToggle.style.color = '#000';
          }
        }
      }

      // Substitua a função setupThemeToggle por esta:
      function setupThemeToggle() {
        const themeToggle = document.getElementById('themeToggle');
        const icon = themeToggle.querySelector('i');

        // Verifica o tema salvo ou preferência do sistema
        const savedTheme = localStorage.getItem('theme');
        const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

        const initialTheme = savedTheme || (systemPrefersDark ? 'dark' : 'light');
        document.documentElement.setAttribute('data-theme', initialTheme);
        updateToggleIcon(initialTheme);

        // Alterna entre temas
        themeToggle.addEventListener('click', () => {
          const currentTheme = document.documentElement.getAttribute('data-theme');
          const newTheme = currentTheme === 'dark' ? 'light' : 'dark';

          document.documentElement.setAttribute('data-theme', newTheme);
          localStorage.setItem('theme', newTheme);
          updateToggleIcon(newTheme);
        });

        function updateToggleIcon(theme) {
          if (theme === 'dark') {
            icon.className = 'fas fa-sun';
          } else {
            icon.className = 'fas fa-moon';
          }
        }
      }

      // 17. INICIALIZAÇÃO COMPLETA
      async function initApp() {
        setupThemeToggle();
        await updateCryptoData();
        await updateAdvancedMetrics();
        await updateFearGreed();
        await initChart();
        setupChat();
        loadNews();

        // Inicializa novas funcionalidades
        window.portfolio = new PortfolioSimulator();
        window.alerts = new PriceAlerts(); // Inicializa os alertas
        MarketIndices.init();
        setupMicrointeractions();
        setupEducativa();
        setupRiskCalculator();

        // Configura listeners para atualização quando a moeda é alterada
        document.getElementById('moedaSelect').addEventListener('change', async () => {
          await updateCryptoData();
          await updateAdvancedMetrics();
          await initChart();
        });

        // Atualizações periódicas
        setInterval(updateCryptoData, 300000); // 5 minutos
        setInterval(updateFearGreed, 3600000); // 1 hora

        console.log("TrackCripto totalmente carregado!");
      }
      

      // Inicia o aplicativo
      initApp();
    });


    // Ativa animações ao rolar
    document.addEventListener('DOMContentLoaded', () => {
      const animateOnScroll = () => {
        const elements = document.querySelectorAll('.slide-up');
        elements.forEach(el => {
          const elTop = el.getBoundingClientRect().top;
          if (elTop < window.innerHeight * 0.8) {
            el.classList.add('animated');
          }
        });
      };

      window.addEventListener('scroll', animateOnScroll);
      animateOnScroll(); // Executa ao carregar
    });

    // Botão "voltar ao topo"
    const backToTopBtn = document.getElementById('backToTop');

    window.addEventListener('scroll', () => {
      const scrollTop = window.scrollY;
      const windowHeight = window.innerHeight;
      const documentHeight = document.documentElement.scrollHeight;

      // Mostra o botão apenas se o usuário estiver a 200px do fim da página
      if (scrollTop + windowHeight >= documentHeight - 200) {
        backToTopBtn.classList.add('visible');
      } else {
        backToTopBtn.classList.remove('visible');
      }
    });

    backToTopBtn.addEventListener('click', () => {
      window.scrollTo({
        top: 0,
        behavior: 'smooth'
      });
    });

     document.addEventListener('DOMContentLoaded', () => {
    const menuToggle = document.querySelector('.menu-toggle');
    const mainNav    = document.querySelector('.main-nav');

    if (!menuToggle || !mainNav) return;

    menuToggle.addEventListener('click', () => {
      menuToggle.classList.toggle('active');
      mainNav.classList.toggle('active');
      document.body.style.overflow = mainNav.classList.contains('active') ? 'hidden' : '';
    });

    document.querySelectorAll('.main-nav a').forEach(a => {
      a.addEventListener('click', () => {
        menuToggle.classList.remove('active');
        mainNav.classList.remove('active');
        document.body.style.overflow = '';
      });
    });
  });

  // ==============================================
// 🔥 CÓDIGO CORRIGIDO - TEMA + MODO
// ==============================================

// Configuração do Toggle de Tema (Claro/Escuro) - VERSÃO CORRIGIDA
function setupThemeToggle() {
  const themeToggle = document.getElementById('themeToggle');
  if (!themeToggle) {
    console.log('Botão de tema não encontrado!');
    return;
  }
  
  // Verificar se já existe um event listener (evitar duplicata)
  themeToggle.replaceWith(themeToggle.cloneNode(true));
  const newThemeToggle = document.getElementById('themeToggle');
  
  // Verificar preferência salva ou do sistema
  const savedTheme = localStorage.getItem('theme');
  const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
  const initialTheme = savedTheme || (systemPrefersDark ? 'dark' : 'light');
  
  // Aplicar tema inicial
  document.documentElement.setAttribute('data-theme', initialTheme);
  updateToggleIcon(initialTheme);

  // Alternar tema - USANDO O NOVO ELEMENTO (sem duplicatas)
  newThemeToggle.addEventListener('click', function() {
    const currentTheme = document.documentElement.getAttribute('data-theme');
    const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
    
    console.log('Alternando tema para:', newTheme);
    document.documentElement.setAttribute('data-theme', newTheme);
    localStorage.setItem('theme', newTheme);
    updateToggleIcon(newTheme);
  });

  function updateToggleIcon(theme) {
    const icon = newThemeToggle.querySelector('i');
    if (!icon) return;
    
    if (theme === 'dark') {
      icon.className = 'fas fa-sun';
      newThemeToggle.setAttribute('aria-label', 'Alternar para modo claro');
    } else {
      icon.className = 'fas fa-moon';
      newThemeToggle.setAttribute('aria-label', 'Alternar para modo escuro');
    }
  }
}

// Configuração do Toggle de Modo Iniciante/Avançado
function setupAdvancedModeToggle() {
  const modeToggle = document.getElementById('advancedModeToggle');
  if (!modeToggle) return;
  
  const modeText = document.getElementById('modeText');
  const advancedSections = document.querySelectorAll('.advanced-mode');

  function loadModePreference() {
    const savedMode = localStorage.getItem('advancedMode') === 'true';
    modeToggle.checked = savedMode;
    updateModeDisplay(savedMode);
  }

  function updateModeDisplay(isAdvanced) {
    if (isAdvanced) {
      advancedSections.forEach(section => {
        section.style.display = 'block';
        section.classList.add('fade-in');
      });
      if (modeText) modeText.textContent = 'Avançado';
    } else {
      advancedSections.forEach(section => {
        section.style.display = 'none';
      });
      if (modeText) modeText.textContent = 'Iniciante';
    }
  }

  modeToggle.addEventListener('change', function() {
    const isAdvanced = this.checked;
    localStorage.setItem('advancedMode', isAdvanced);
    updateModeDisplay(isAdvanced);
  });

  loadModePreference();
}

// Adicionar animação de fade-in
const style = document.createElement('style');
style.textContent = `
  .fade-in {
    animation: fadeIn 0.5s ease-in-out;
  }
  
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }
`;
document.head.appendChild(style);

// Inicializar TUDO - COM PROTECÇÃO CONTRA DUPLICATAS
let initialized = false;
function initializeAll() {
  if (initialized) return;
  initialized = true;
  
  console.log('Inicializando controles...');
  setupThemeToggle();
  setupAdvancedModeToggle();
}

// Múltiplas formas de inicializar para garantir
document.addEventListener('DOMContentLoaded', initializeAll);
window.addEventListener('load', initializeAll);
setTimeout(initializeAll, 1000); // Backup

// ==============================================
// 🎮 QUIZ INTERATIVO - PERFIL DO INVESTIDOR
// ==============================================

class CryptoQuiz {
  constructor() {
    this.currentQuestion = 1;
    this.totalQuestions = 3;
    this.answers = [];
    this.quizElement = document.getElementById('quizModal');
    this.resultElement = document.getElementById('quizResult');
    
    this.init();
  }

  init() {
    this.bindEvents();
    this.showQuiz();
  }

  bindEvents() {
    // Opções de resposta
    document.querySelectorAll('.option-btn').forEach(btn => {
      btn.addEventListener('click', (e) => this.selectOption(e));
    });

    // Navegação
    document.getElementById('prevQuestion').addEventListener('click', () => this.prevQuestion());
    document.getElementById('nextQuestion').addEventListener('click', () => this.nextQuestion());
    
    // Resultado
    document.getElementById('startDashboard').addEventListener('click', () => this.startDashboard());
    document.getElementById('changeMode').addEventListener('click', () => this.changeMode());
  }

  showQuiz() {
    if (localStorage.getItem('quizCompleted')) return;
    
    setTimeout(() => {
      this.quizElement.style.display = 'flex';
      this.updateProgress();
      this.updateNavigation();
    }, 1000);
  }

  selectOption(e) {
    const option = e.currentTarget;
    const value = option.dataset.value;
    
    // Remover seleção anterior
    document.querySelectorAll('.option-btn').forEach(btn => {
      btn.style.background = '';
      btn.style.borderColor = '';
    });
    
    // Estilizar opção selecionada
    option.style.background = 'rgba(0, 255, 136, 0.3)';
    option.style.borderColor = '#00ff88';
    
    // Salvar resposta
    this.answers[this.currentQuestion - 1] = value;
    
    // Habilitar próximo
    document.getElementById('nextQuestion').disabled = false;
  }

  nextQuestion() {
    if (this.currentQuestion < this.totalQuestions) {
      this.hideQuestion(this.currentQuestion);
      this.currentQuestion++;
      this.showQuestion(this.currentQuestion);
      this.updateProgress();
      this.updateNavigation();
    } else {
      this.showResult();
    }
  }

  prevQuestion() {
    if (this.currentQuestion > 1) {
      this.hideQuestion(this.currentQuestion);
      this.currentQuestion--;
      this.showQuestion(this.currentQuestion);
      this.updateProgress();
      this.updateNavigation();
    }
  }

  showQuestion(questionNum) {
    const question = document.querySelector(`[data-question="${questionNum}"]`);
    question.classList.add('active');
    question.style.display = 'block';
  }

  hideQuestion(questionNum) {
    const question = document.querySelector(`[data-question="${questionNum}"]`);
    question.classList.remove('active');
    question.style.display = 'none';
  }

  updateProgress() {
    const progress = (this.currentQuestion / this.totalQuestions) * 100;
    document.querySelector('.progress-fill').style.width = `${progress}%`;
    document.querySelector('.question-counter').textContent = `${this.currentQuestion}/${this.totalQuestions}`;
  }

  updateNavigation() {
    document.getElementById('prevQuestion').disabled = this.currentQuestion === 1;
    document.getElementById('nextQuestion').disabled = !this.answers[this.currentQuestion - 1];
  }

  showResult() {
    const profile = this.calculateProfile();
    
    // Animação de transição
    this.quizElement.style.animation = 'modalSlideOut 0.5s ease-in forwards';
    
    setTimeout(() => {
      this.quizElement.style.display = 'none';
      this.displayResult(profile);
      this.resultElement.style.display = 'flex';
    }, 500);
  }

  calculateProfile() {
    const beginnerAnswers = this.answers.filter(a => a === 'beginner').length;
    const advancedAnswers = this.answers.filter(a => a === 'advanced').length;
    
    return advancedAnswers > beginnerAnswers ? 'advanced' : 'beginner';
  }

  displayResult(profile) {
    const results = {
      beginner: {
        icon: '🌱',
        title: 'Explorador Iniciante!',
        description: 'Você está começando sua jornada no mundo cripto. Vamos devagar e sempre!',
        profileName: 'Broto Crypto'
      },
      advanced: {
        icon: '🚀',
        title: 'Trader Acelerado!', 
        description: 'Você já domina as criptomoedas! Prepare-se para análise profunda.',
        profileName: 'Tubarão das Criptos'
      }
    };

    const result = results[profile];
    
    document.getElementById('resultIcon').textContent = result.icon;
    document.getElementById('resultTitle').textContent = result.title;
    document.getElementById('resultDescription').textContent = result.description;
    document.getElementById('resultProfileName').textContent = result.profileName;
    
    // Aplicar modo automaticamente
    localStorage.setItem('userProfile', profile);
    localStorage.setItem('quizCompleted', 'true');
    
    if (profile === 'advanced') {
      document.getElementById('advancedModeToggle').checked = true;
      this.updateModeDisplay(true);
    }
  }

  updateModeDisplay(isAdvanced) {
    const advancedSections = document.querySelectorAll('.advanced-mode');
    const modeText = document.getElementById('modeText');
    
    if (isAdvanced) {
      advancedSections.forEach(section => {
        section.style.display = 'block';
        section.classList.add('fade-in');
      });
      if (modeText) modeText.textContent = 'Avançado';
    } else {
      advancedSections.forEach(section => {
        section.style.display = 'none';
      });
      if (modeText) modeText.textContent = 'Iniciante';
    }
  }

  startDashboard() {
    this.resultElement.style.animation = 'resultScaleOut 0.5s ease-in forwards';
    
    setTimeout(() => {
      this.resultElement.style.display = 'none';
      // Focar no conteúdo principal
      document.getElementById('crypto-data').scrollIntoView({
        behavior: 'smooth'
      });
    }, 500);
  }

  changeMode() {
    this.resultElement.style.display = 'none';
    this.quizElement.style.display = 'flex';
    this.quizElement.style.animation = 'modalSlideIn 0.5s ease-out';
    
    // Resetar quiz
    this.currentQuestion = 1;
    this.answers = [];
    this.hideQuestion(2);
    this.hideQuestion(3);
    this.showQuestion(1);
    this.updateProgress();
    this.updateNavigation();
    
    // Limpar seleções
    document.querySelectorAll('.option-btn').forEach(btn => {
      btn.style.background = '';
      btn.style.borderColor = '';
    });
  }
}

// Adicionar animações extras
const quizStyles = `
  @keyframes modalSlideOut {
    from {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
    to {
      opacity: 0;
      transform: translateY(50px) scale(0.9);
    }
  }
  
  @keyframes resultScaleOut {
    from {
      opacity: 1;
      transform: scale(1) rotate(0);
    }
    to {
      opacity: 0;
      transform: scale(0.8) rotate(5deg);
    }
  }
  
  .option-btn {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }
`;

const styleSheet = document.createElement('style');
styleSheet.textContent = quizStyles;
document.head.appendChild(styleSheet);

// Inicializar quiz quando o DOM carregar
document.addEventListener('DOMContentLoaded', () => {
  // Só inicializar se não completou o quiz
  if (!localStorage.getItem('quizCompleted')) {
    setTimeout(() => {
      new CryptoQuiz();
    }, 2000);
  }
});
  </script>

  </script>
<!-- Quiz Modal -->
<div id="quizModal" class="quiz-modal" style="display: none;">
  <div class="quiz-container">
    <div class="quiz-header">
      <h2>🎯 Descubra Seu Perfil Cripto</h2>
      <p>Responda 3 perguntas rápidas para personalizarmos sua experiência!</p>
      <div class="progress-bar">
        <div class="progress-fill"></div>
      </div>
    </div>

    <div class="quiz-content">
      <!-- Pergunta 1 -->
      <div class="question active" data-question="1">
        <h3>Quando o Bitcoin cai 10% você…</h3>
        <div class="options">
          <button class="option-btn" data-value="beginner">
            <span class="emoji">😅</span>
            <span>Fico desesperado e vendo tudo</span>
          </button>
          <button class="option-btn" data-value="advanced">
            <span class="emoji">😎</span>
            <span>Compro mais sem medo</span>
          </button>
        </div>
      </div>

      <!-- Pergunta 2 -->
      <div class="question" data-question="2">
        <h3>Seu conhecimento sobre criptomoedas é…</h3>
        <div class="options">
          <button class="option-btn" data-value="beginner">
            <span class="emoji">🌱</span>
            <span>Bitcoin é aquilo que subiu né?</span>
          </button>
          <button class="option-btn" data-value="advanced">
            <span class="emoji">🧠</span>
            <span>Sei explicar blockchain pra minha avó</span>
          </button>
        </div>
      </div>

      <!-- Pergunta 3 -->
      <div class="question" data-question="3">
        <h3>Prefiro acompanhar meus investimentos…</h3>
        <div class="options">
          <button class="option-btn" data-value="beginner">
            <span class="emoji">📅</span>
            <span>Uma vez por mês tá bom</span>
          </button>
          <button class="option-btn" data-value="advanced">
            <span class="emoji">⏰</span>
            <span>Todo dia, várias vezes ao dia</span>
          </button>
        </div>
      </div>
    </div>

    <div class="quiz-footer">
      <button id="prevQuestion" class="nav-btn" disabled>
        <i class="fas fa-arrow-left"></i> Voltar
      </button>
      <span class="question-counter">1/3</span>
      <button id="nextQuestion" class="nav-btn" disabled>
        Próxima <i class="fas fa-arrow-right"></i>
      </button>
    </div>
  </div>
</div>

<!-- Resultado do Quiz -->
<div id="quizResult" class="quiz-result" style="display: none;">
  <div class="result-container">
    <div class="result-icon" id="resultIcon">🚀</div>
    <h2 id="resultTitle">Seu Perfil Cripto</h2>
    <p id="resultDescription" class="result-desc"></p>
    <div class="result-profile">
      <span id="resultProfileName" class="profile-name"></span>
    </div>
    <button id="startDashboard" class="cta-btn">
      Começar a Explorar <i class="fas fa-rocket"></i>
    </button>
    <button id="changeMode" class="text-btn">
      Quero tentar outro modo
    </button>
  </div>
</div>
</body>

</html>